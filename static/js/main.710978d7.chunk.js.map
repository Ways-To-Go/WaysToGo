{"version":3,"sources":["NavigationBar.js","ShowVoyage.js","AddVoyage.js","ShowCarte.js","Profile.js","SearchResult.js","About.js","App.js","serviceWorker.js","index.js"],"names":["NavigationBar","state","showLogin","showRegister","email","password","password2","firstname","lastname","registerSuccess","registerMessage","e","setState","onChange","target","name","value","onSubmitLogin","preventDefault","console","log","Axios","post","username","headers","then","res","props","connect","data","token","get","Authorization","Cookies","set","id","path","catch","err","onSubmitRegister","success","getStyleLogin","display","getStyleRegister","class","this","active","href","connected","onClick","style","type","placeholder","Component","EnteteVoyage","param","saveTripButton","React","createRef","verifIfTripAlreadySaved","bind","monthNames","etapes","length","d","Date","departure","getMonth","arrival","Math","ceil","date1","date2","getDateDebut","getDateFin","a","cname","ca","decodeURIComponent","document","cookie","split","i","c","charAt","substring","indexOf","xhttp","XMLHttpRequest","superThis","onreadystatechange","responseText","readyState","status","current","visibility","listformat","JSON","parse","recordedTrips","forEach","item","push","innerHTML","open","getCookie","setRequestHeader","send","xhttp2","index","splice","stringify","ref","refHead","title","startdate","getMonthsDate1","stages","description","vegan","ecological","author","firstName","lastName","getDureeVoyage2","enddate","getDureeVoyage1","edit","for","border","accept","changeCover","saveTrip","EtapeVoyage","etape","city","photos","map","photo","key","src","alt","height","width","departureTransport","ShowVoyage","loadDoc","titre","toRender","parentVoyage","Map","center","zoom","TileLayer","attribution","url","Marker","position","lng","lat","Popup","Upload","files","filesToShow","handleChange","event","changeButtonState","parentUpload","totalEndUpload","images","file","img","addImgFile","image","idAPI","link","isCover","FormData","append","imgcontainer","URL","createObjectURL","refInput","multiple","ResearchBarCity","researchRef","getdataback","parentV","response","option","createElement","innerText","display_name","onclick","refCity","parseFloat","lon","appendChild","onKeyPress","hinter","UneEtape","refLocation","refName","refDate","refDescription","refDateDepart","refDepartureTransport","editStepLink","arguments","location","date","dateDepart","CreationVoyageAjoutEtapes","ecolo","voyageId","editStepBool","setTextInputRef","inputphotoToReset","toggleModal","getLatLnt","editStep","changeEnteteBackground","newCity","newName","newDate","newDateDepart","newDepartureTransport","newDescription","newLat","newLnt","boutonOK","stepDescription","stepName","stepDate","stepDateDepart","stepDepartureTransport","stepCity","querySelector","classList","toggle","ReactDOM","render","textContent","stageFrom","distance","stepId","stepLat","stepLnt","stepFiles","country","mark","trip","etat","disabled","lnt","backgroundImage","concat","addEtapeVoyage","ModalChargement","CreationVoyage","validity","valid","addMyVoyage","checked","alert","className","required","htmlFor","addVoyageCheck","AddVoyage","startNewVoyage","chargement","renouvelerToken","parentToken","updateToken","newname","newdescription","newvegan","newecolo","ShowCarte","voyages","loadTrips","parentThis","voyage","Profile","trips","getUserInfo","getTrips","tripTitles","containerStyle","backgroundColor","boxStyle","color","textAlign","margin","justifyContent","SearchForm","keyword","chercher","ResultList","firstParam","lastNqme","SearchResult","startNewSearch","About","App","disconnect","remove","cookies","urlParams","URLSearchParams","window","search","pageActuelle","Boolean","hostname","match","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.710978d7.chunk.js","sourcesContent":["import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport Axios from \"axios\";\r\nimport Cookies from \"universal-cookie\";\r\n\r\nexport default class NavigationBar extends Component {\r\n  state = {\r\n    showLogin: false,\r\n    showRegister: false,\r\n    email: \"\",\r\n    password: \"\",\r\n    password2: \"\",\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    registerSuccess: \"\",\r\n    registerMessage: \"\",\r\n  };\r\n\r\n  showLogin = (e) => {\r\n    this.setState({ showLogin: !this.state.showLogin, showRegister: false });\r\n  };\r\n\r\n  showRegister = (e) => {\r\n    this.setState({ showRegister: !this.state.showRegister, showLogin: false });\r\n  };\r\n\r\n  onChange = (e) => {\r\n    this.setState({ [e.target.name]: e.target.value });\r\n  };\r\n\r\n  onSubmitLogin = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Login attempt\");\r\n    //get token from api\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n    Axios.post(\r\n      \"https://wtg.aymerik-diebold.fr/login_check\",\r\n      {\r\n        username: this.state.email,\r\n        password: this.state.password,\r\n      },\r\n      { headers }\r\n    )\r\n      .then((res) => {\r\n        console.log(res);\r\n        this.props.connect(res.data.token);\r\n        this.setState({ showLogin: false });\r\n\r\n        Axios.get(\"https://wtg.aymerik-diebold.fr/api/me\", {\r\n          headers: { Authorization: \"Bearer \" + res.data.token },\r\n        })\r\n          .then((res) => {\r\n            console.log(res);\r\n            const cookies = new Cookies();\r\n            cookies.set(\"id\", res.data.id, { path: \"/\" });\r\n          })\r\n          .catch((err) => {\r\n            console.log(\"Error when retrieve user id\");\r\n            throw err;\r\n          });\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"Login failed\");\r\n        this.setState({\r\n          registerSuccess: \"Email/password combination not found :(\",\r\n        });\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  onSubmitRegister = (e) => {\r\n    e.preventDefault();\r\n    console.log(\"Register attempt\");\r\n    //todo: register to api\r\n    const headers = {\r\n      \"Content-Type\": \"application/json\",\r\n    };\r\n    if (this.state.password !== this.state.password2) {\r\n      this.setState({ registerMessage: \"Your passwords do not match :(\" });\r\n    } else if (\r\n      this.state.email === \"\" ||\r\n      this.state.password === \"\" ||\r\n      this.state.password2 === \"\"\r\n    ) {\r\n      this.setState({ registerMessage: \"Email and Password are required\" });\r\n    } else {\r\n      Axios.post(\r\n        \"https://wtg.aymerik-diebold.fr/register\",\r\n        {\r\n          email: this.state.email,\r\n          password: this.state.password,\r\n          firstname: this.state.firstname,\r\n          lastname: this.state.lastname,\r\n        },\r\n        { headers }\r\n      )\r\n        .then((res) => {\r\n          if (res.data.success === true) {\r\n            console.log(\"Registration successful!\");\r\n            this.setState({\r\n              registerSuccess:\r\n                \"Your account has been created! You can now log in\",\r\n              email: \"\",\r\n              password: \"\",\r\n              password2: \"\",\r\n              firstname: \"\",\r\n              lastname: \"\",\r\n              showRegister: false,\r\n              showLogin: true,\r\n            });\r\n          } else {\r\n            console.log(\"Registration failed :(\");\r\n            this.setState({\r\n              registerMessage: \"This email address is already registered\",\r\n            });\r\n          }\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"error\");\r\n          throw err;\r\n        });\r\n    }\r\n  };\r\n\r\n  getStyleLogin = () => {\r\n    return {\r\n      display: this.state.showLogin ? \"block\" : \"none\",\r\n    };\r\n  };\r\n\r\n  getStyleRegister = () => {\r\n    return {\r\n      display: this.state.showRegister ? \"block\" : \"none\",\r\n    };\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <div class=\"topnav\">\r\n        {this.props.active == 0 ? (\r\n          <a class=\"active\" href=\"/WaysToGo/\">\r\n            WaysToGo\r\n          </a>\r\n        ) : (\r\n          <a href=\"/WaysToGo/\">WaysToGo</a>\r\n        )}\r\n        {this.props.active == 2 ? (\r\n          <a class=\"active\" href=\"#contact\">\r\n            Contact\r\n          </a>\r\n        ) : (\r\n          <a href=\"#contact\">Contact</a>\r\n        )}\r\n        {this.props.active == 3 ? (\r\n          <a class=\"active\" href=\"?show=about\">\r\n            About\r\n          </a>\r\n        ) : (\r\n          <a href=\"?show=about\">About</a>\r\n        )}\r\n        {this.props.connected ? (\r\n          <a class={this.props.active == 1 ? \"active\" : \"\"} href=\"?show=save\">\r\n            Add a Trip\r\n          </a>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n        {this.props.connected ? (\r\n          <a\r\n            class={this.props.active == 4 ? \"active\" : \"\"}\r\n            href=\"?show=profile\"\r\n          >\r\n            Profile\r\n          </a>\r\n        ) : (\r\n          <div>\r\n            <a class=\"connection\" onClick={this.showLogin}>\r\n              Login\r\n            </a>\r\n\r\n            <a class=\"connection\" onClick={this.showRegister}>\r\n              Register\r\n            </a>\r\n          </div>\r\n        )}\r\n        {this.props.connected ? (\r\n          <a href=\"?logout=true\">Logout</a>\r\n        ) : (\r\n          <span></span>\r\n        )}\r\n        {this.props.active == 5 ? (\r\n          <a class=\"active\" href={\"?show=research\"}>\r\n            {\" \"}\r\n            Recherche{\" \"}\r\n          </a>\r\n        ) : (\r\n          <a href={\"?show=research\"}>Recherche</a>\r\n        )}\r\n\r\n        <div id=\"login\" style={this.getStyleLogin()}>\r\n          <p>{this.state.registerSuccess}</p>\r\n          <p>Email</p>\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            onChange={this.onChange}\r\n            value={this.state.email}\r\n            placeholder=\"john.doe@mail.com\"\r\n          />\r\n\r\n          <p>Password</p>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            onChange={this.onChange}\r\n            value={this.state.password}\r\n          />\r\n\r\n          <input\r\n            type=\"submit\"\r\n            name=\"submit\"\r\n            value=\"Login\"\r\n            onClick={this.onSubmitLogin}\r\n          />\r\n        </div>\r\n\r\n        <div id=\"register\" style={this.getStyleRegister()}>\r\n          <p>{this.state.registerMessage}</p>\r\n          <p>Email</p>\r\n          <input\r\n            type=\"text\"\r\n            name=\"email\"\r\n            onChange={this.onChange}\r\n            value={this.state.email}\r\n            placeholder=\"ex. john.doe@mail.com\"\r\n          />\r\n\r\n          <p>Firstname</p>\r\n          <input\r\n            type=\"text\"\r\n            name=\"firstname\"\r\n            onChange={this.onChange}\r\n            value={this.state.firstname}\r\n            placeholder=\"ex. John\"\r\n          />\r\n\r\n          <p>Lastname</p>\r\n          <input\r\n            type=\"text\"\r\n            name=\"lastname\"\r\n            onChange={this.onChange}\r\n            value={this.state.lastname}\r\n            placeholder=\"ex. Doe\"\r\n          />\r\n\r\n          <p>Password</p>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password\"\r\n            onChange={this.onChange}\r\n            value={this.state.password}\r\n          />\r\n\r\n          <p>Confirm Password</p>\r\n          <input\r\n            type=\"password\"\r\n            name=\"password2\"\r\n            onChange={this.onChange}\r\n            value={this.state.password2}\r\n          />\r\n\r\n          <input\r\n            type=\"submit\"\r\n            name=\"submit\"\r\n            value=\"Login\"\r\n            onClick={this.onSubmitRegister}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport NavigationBar from \"./NavigationBar\";\r\nimport Axios from \"axios\";\r\n\r\n// show the head of the trip\r\n/* Need a parameter param like :\r\n * param = {\r\n * title = string\r\n * ?startdate = string in a good date format (aaaa-mm-dd)\r\n * vegan = bool\r\n * ecological = bool\r\n * author {\r\n *\t\tfirstName = string\r\n *\t\tlastName = string\r\n *\t}\r\n *\tstages = list of stage\r\n * }\r\n */\r\nexport class EnteteVoyage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tparam: props.param,\r\n\t\t};\r\n\r\n\t\tthis.saveTripButton = React.createRef();\r\n\t\tthis.verifIfTripAlreadySaved = this.verifIfTripAlreadySaved.bind(this);\r\n\r\n\t\tthis.monthNames = [\r\n\t\t\t\"January\",\r\n\t\t\t\"February\",\r\n\t\t\t\"March\",\r\n\t\t\t\"April\",\r\n\t\t\t\"May\",\r\n\t\t\t\"June\",\r\n\t\t\t\"July\",\r\n\t\t\t\"August\",\r\n\t\t\t\"September\",\r\n\t\t\t\"October\",\r\n\t\t\t\"November\",\r\n\t\t\t\"December\",\r\n\t\t];\r\n\r\n\t}\r\n\r\n\t/* TODO :\r\n\t * qui retourne le nombre de photos\r\n\t * qui retourne le nombre de pays ou passe le voyage\r\n\t */\r\n\r\n\tgetStageNumber(etapes) {\r\n\t\treturn etapes.length;\r\n\t}\r\n\r\n\t// retourne le mois de debut\r\n\tgetDateDebut(etapes) {\r\n\t\tif (etapes.length > 0) {\r\n\t\t\tvar d = new Date(etapes[0].departure);\r\n\t\t\treturn this.monthNames[d.getMonth()];\r\n\t\t} else return null;\r\n\t}\r\n\r\n\t// retourne le mois de fin\r\n\tgetDateFin(etapes) {\r\n\t\tif (etapes.length > 0) {\r\n\t\t\tvar d = new Date(etapes[etapes.length - 1].arrival);\r\n\t\t\treturn this.monthNames[d.getMonth()];\r\n\t\t} else return 0;\r\n\t}\r\n\r\n\t// retourne le nombre de jours\r\n\tgetDureeVoyage1(etapes) {\r\n\t\tif (etapes.length > 0) {\r\n\t\t\tvar d =\r\n\t\t\t\tnew Date(etapes[etapes.length - 1].arrival) -\r\n\t\t\t\tnew Date(etapes[0].departure);\r\n\t\t\tconst diffDays = Math.ceil(d / (1000 * 60 * 60 * 24)) + 1;\r\n\t\t\treturn diffDays;\r\n\t\t} else return 0;\r\n\t}\r\n\r\n\tgetDureeVoyage2(date1, date2) {\r\n\t\tvar d = new Date(date2) - new Date(date1);\r\n\t\tconst diffDays = Math.ceil(d / (1000 * 60 * 60 * 24)) + 1;\r\n\t\treturn diffDays;\r\n\t}\r\n\r\n\t// renvoi la date a afficher (mois - mois)\r\n\tgetMonthsDate1(etapes) {\r\n\t\tif (etapes.length > 0) {\r\n\t\t\tvar d = this.getDateDebut(etapes);\r\n\t\t\tvar a = this.getDateFin(etapes);\r\n\t\t\tif (d !== a)\r\n\t\t\t\treturn this.getDateDebut(etapes) + \" - \" + this.getDateFin(etapes);\r\n\t\t\telse return d;\r\n\t\t} else return \"\";\r\n\t}\r\n\r\n\tgetMonthsDate2(date1, date2) {\r\n\t\tvar d = new Date(date1);\r\n\t\tvar a = new Date(date2);\r\n\t\tif (d.getMonth() !== a.getMonth())\r\n\t\t\treturn (\r\n\t\t\t\tthis.monthNames[d.getMonth()] + \" - \" + this.monthNames[a.getMonth()]\r\n\t\t\t);\r\n\t\telse return this.monthNames[d.getMonth()];\r\n\t}\r\n\r\n\t// from StackOverflow\r\n\tgetCookie(cname) {\r\n\t\tvar name = cname + \"=\";\r\n\t\tvar decodedCookie = decodeURIComponent(document.cookie);\r\n\t\tvar ca = decodedCookie.split(';');\r\n\t\tfor (var i = 0; i < ca.length; i++) {\r\n\t\t\tvar c = ca[i];\r\n\t\t\twhile (c.charAt(0) == ' ') {\r\n\t\t\t\tc = c.substring(1);\r\n\t\t\t}\r\n\t\t\tif (c.indexOf(name) == 0) {\r\n\t\t\t\treturn c.substring(name.length, c.length);\r\n\t\t\t}\r\n\t\t}\r\n\t\treturn \"\";\r\n\t}\r\n\r\n\tverifIfTripAlreadySaved() {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar superThis = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\tconsole.log(this.responseText);\r\n\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\tsuperThis.saveTripButton.current.style.visibility = \"visible\";\r\n\r\n\t\t\t\tvar listformat = [];\r\n\t\t\t\t//console.log(JSON.parse(this.responseText));\r\n\t\t\t\tJSON.parse(this.responseText).recordedTrips.forEach(function (item) {\r\n\t\t\t\t\tlistformat.push(item[\"@id\"]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\tif (listformat.indexOf(\"/api/trips/\" + superThis.props.param.id) === -1) {\r\n\t\t\t\t\tsuperThis.saveTripButton.current.innerHTML = \"Save this trip\";\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsuperThis.saveTripButton.current.innerHTML = \"Trip already saved :) Click to cancel\";\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\telse if (this.readyState === 4 && this.status === 401) {\r\n\t\t\t\t// renouvellement token automatiquement\r\n\t\t\t\tconst headers = {\r\n\t\t\t\t\t\"Content-Type\": \"application/json\",\r\n\t\t\t\t};\r\n\t\t\t\tAxios.post(\r\n\t\t\t\t\t\"https://wtg.aymerik-diebold.fr/login_check\",\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tusername: \"mailleon@gmail.com\",\r\n\t\t\t\t\t\tpassword: \"monmdp111A!\",\r\n\t\t\t\t\t},\r\n\t\t\t\t\t{ headers }\r\n\t\t\t\t)\r\n\t\t\t\t\t.then((res) => {\r\n\t\t\t\t\t\t//console.log(res);\r\n\t\t\t\t\t\tsuperThis.props.connect(res.data.token);\r\n\t\t\t\t\t\tsuperThis.verifIfTripAlreadySaved();\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch((err) => {\r\n\t\t\t\t\t\tthrow err;\r\n\t\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhttp.open(\"GET\", \"https://wtg.aymerik-diebold.fr/api/users/\" + superThis.getCookie(\"id\"), true);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + superThis.getCookie(\"token\"));\r\n\t\txhttp.send();\r\n\t}\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.verifIfTripAlreadySaved();\r\n\t};\r\n\r\n\tsaveTrip() {\r\n\t\t//console.log(document.cookie);\r\n\r\n\t\t// we first retrieve user already saved Trips\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar superThis = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\t//console.log(this.responseText);\r\n\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\t//console.log(\"SUCCESS\");\r\n\r\n\t\t\t\tvar res = JSON.parse(this.responseText);\r\n\t\t\t\tvar listformat = [];\r\n\t\t\t\tres.recordedTrips.forEach(function (item) {\r\n\t\t\t\t\tlistformat.push(item[\"@id\"]);\r\n\t\t\t\t});\r\n\r\n\t\t\t\t// if trip is already saved, we delete it, else we saved it\r\n\t\t\t\tvar index = listformat.indexOf(\"/api/trips/\" + superThis.props.param.id);\r\n\t\t\t\tif (index !== -1) {\r\n\t\t\t\t\tif (index > -1) {\r\n\t\t\t\t\t\tlistformat.splice(index, 1);\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tvar xhttp2 = new XMLHttpRequest();\r\n\t\t\t\t\txhttp2.onreadystatechange = function () {\r\n\t\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\t\t\t\tsuperThis.saveTripButton.current.innerHTML = \"Save this trip\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\txhttp2.open(\"PATCH\", \"https://wtg.aymerik-diebold.fr/api/users/\" + superThis.getCookie(\"id\"), true);\r\n\t\t\t\t\txhttp2.setRequestHeader('Content-Type', 'application/merge-patch+json');\r\n\t\t\t\t\txhttp2.setRequestHeader('Authorization', 'Bearer ' + superThis.getCookie(\"token\"));\r\n\r\n\t\t\t\t\t//console.log([...new Set(listformat)]);\r\n\t\t\t\t\txhttp2.send(JSON.stringify({\r\n\t\t\t\t\t\t\"recordedTrips\": listformat // to onsure each trip is saved only one time\r\n\t\t\t\t\t}));\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\t// then we add the new trip to the olders\r\n\t\t\t\t\tvar xhttp2 = new XMLHttpRequest();\r\n\t\t\t\t\txhttp2.onreadystatechange = function () {\r\n\t\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\t\t\t\tsuperThis.saveTripButton.current.innerHTML = \"Trip saved :) Click to cancel\";\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\t//console.log(\"https://wtg.aymerik-diebold.fr/api/users/\" + superThis.getCookie(\"id\"));\r\n\t\t\t\t\txhttp2.open(\"PATCH\", \"https://wtg.aymerik-diebold.fr/api/users/\" + superThis.getCookie(\"id\"), true);\r\n\t\t\t\t\txhttp2.setRequestHeader('Content-Type', 'application/merge-patch+json');\r\n\t\t\t\t\txhttp2.setRequestHeader('Authorization', 'Bearer ' + superThis.getCookie(\"token\"));\r\n\r\n\t\t\t\t\tlistformat.push(\"/api/trips/\" + superThis.props.param.id);\r\n\t\t\t\t\t//console.log([...new Set(listformat)]);\r\n\t\t\t\t\txhttp2.send(JSON.stringify({\r\n\t\t\t\t\t\t\"recordedTrips\": listformat // to onsure each trip is saved only one time\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t\txhttp.open(\"GET\", \"https://wtg.aymerik-diebold.fr/api/users/\" + this.getCookie(\"id\"), true);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/merge-patch+json');\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + this.getCookie(\"token\"));\r\n\t\txhttp.send();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div ref={this.state.param.refHead} id=\"head\">\r\n\t\t\t\t<h2>{this.state.param.title}</h2>\r\n\t\t\t\t<h5>\r\n\t\t\t\t\t{this.state.param.startdate\r\n\t\t\t\t\t\t? \"\"\r\n\t\t\t\t\t\t: this.getMonthsDate1(this.state.param.stages)}\r\n\t\t\t\t</h5>\r\n\t\t\t\t<p class=\"ladescription\">{'\"' + this.state.param.description + '\"'}</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{this.state.param.vegan\r\n\t\t\t\t\t\t? \"This trip is vegan\"\r\n\t\t\t\t\t\t: \"This trip is non-vegan\"}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\t{this.state.param.ecological\r\n\t\t\t\t\t\t? \"This trip is ecological\"\r\n\t\t\t\t\t\t: \"This trip is marked as non-ecological\"}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tauteur :{\" \"}\r\n\t\t\t\t\t{this.state.param.author.firstName +\r\n\t\t\t\t\t\t\" \" +\r\n\t\t\t\t\t\tthis.state.param.author.lastName}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p>\r\n\t\t\t\t\tDurée du voyage :{\" \"}\r\n\t\t\t\t\t{this.state.param.startdate\r\n\t\t\t\t\t\t? this.getDureeVoyage2(\r\n\t\t\t\t\t\t\tthis.state.param.startdate,\r\n\t\t\t\t\t\t\tthis.state.param.enddate\r\n\t\t\t\t\t\t)\r\n\t\t\t\t\t\t: this.getDureeVoyage1(this.state.param.stages)}{\" \"}\r\n\t\t\t\t\tjours\r\n        </p>\r\n\t\t\t\t{this.state.param.edit ? (\r\n\t\t\t\t\t<div>\r\n\t\t\t\t\t\t<label for=\"files2\" style={{ border: \"2px solid black\" }}>\r\n\t\t\t\t\t\t\tChange cover image\r\n            </label>\r\n\t\t\t\t\t\t<input\r\n\t\t\t\t\t\t\tid=\"files2\"\r\n\t\t\t\t\t\t\tstyle={{ visibility: \"hidden\" }}\r\n\t\t\t\t\t\t\tref={this.state.param.refHead}\r\n\t\t\t\t\t\t\ttype=\"file\"\r\n\t\t\t\t\t\t\taccept=\"image/*\"\r\n\t\t\t\t\t\t\tonChange={this.state.param.changeCover}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t\t<button ref={this.saveTripButton} style={{ visibility: \"hidden\" }} type=\"button\" onClick={() => this.saveTrip()}>Save this trip</button>\r\n\t\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n// render a step\r\nexport class EtapeVoyage extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div class=\"etape\">\r\n\t\t\t\t\t<p class=\"nomEtape\">{this.props.etape.description}</p>\r\n\r\n\t\t\t\t\t<p class=\"villedate_etape\">\r\n\t\t\t\t\t\t{this.props.etape.city + \" • \" + new Date(this.props.etape.arrival)}\r\n\t\t\t\t\t</p>\r\n\r\n\t\t\t\t\t{this.props.etape.photos.map((photo, i) => (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<img\r\n\t\t\t\t\t\t\t\tkey={i}\r\n\t\t\t\t\t\t\t\tsrc={photo.path}\r\n\t\t\t\t\t\t\t\talt={photo.title}\r\n\t\t\t\t\t\t\t\theight=\"150\"\r\n\t\t\t\t\t\t\t\twidth=\"200\"\r\n\t\t\t\t\t\t\t></img>\r\n\r\n\t\t\t\t\t\t\t<p key={i}>{photo.description}</p>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\r\n\t\t\t\t{this.props.etape.departureTransport ? (\r\n\t\t\t\t\t<div class=\"transition_etape\">\r\n\t\t\t\t\t\t<p class=\"transitionTexte\">\r\n\t\t\t\t\t\t\t• Moyen de transport : {this.props.etape.departureTransport.type}\r\n\t\t\t\t\t\t</p>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t) : (\r\n\t\t\t\t\t\t\"\"\r\n\t\t\t\t\t)}\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nclass ShowVoyage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.loadDoc(this); // on recupere le voyage souhaite avec une requete ajax\r\n\r\n\t\tthis.state = {\r\n\t\t\tid: props.id,\r\n\t\t\ttitre: null,\r\n\t\t\ttoRender: <h1>Chargement en cours...</h1>,\r\n\t\t};\r\n\t}\r\n\r\n\tloadDoc(parentVoyage) {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\tconst param = JSON.parse(this.responseText);\r\n\t\t\t\t//console.log(\"Voyage : \"); console.log(param);\r\n\t\t\t\tparentVoyage.setState({\r\n\t\t\t\t\ttoRender: (\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<NavigationBar\r\n\t\t\t\t\t\t\t\tconnected={parentVoyage.props.connected}\r\n\t\t\t\t\t\t\t\tconnect={parentVoyage.props.connect}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t<div id=\"carteSide\">\r\n\t\t\t\t\t\t\t\t<Map id=\"ShowVoyageMap\" center={[40.0, 3.0]} zoom={1}>\r\n\t\t\t\t\t\t\t\t\t<TileLayer\r\n\t\t\t\t\t\t\t\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\t\t\t\t\t\t\t\turl=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n\t\t\t\t\t\t\t\t\t/>\r\n\r\n\t\t\t\t\t\t\t\t\t{param.stages.map((etape) => (\r\n\t\t\t\t\t\t\t\t\t\t<Marker position={[etape.lng, etape.lat]}>\r\n\t\t\t\t\t\t\t\t\t\t\t<Popup>\r\n\t\t\t\t\t\t\t\t\t\t\t\t<h1>{etape.description}</h1>\r\n\t\t\t\t\t\t\t\t\t\t\t</Popup>\r\n\t\t\t\t\t\t\t\t\t\t</Marker>\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</Map>\r\n\t\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t\t<div id=\"information\">\r\n\t\t\t\t\t\t\t\t<EnteteVoyage param={param} connect={parentVoyage.props.connect} />\r\n\r\n\t\t\t\t\t\t\t\t<div id=\"etapes\">\r\n\t\t\t\t\t\t\t\t\t{//console.log(param)\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t{param.stages.map((etape) => (\r\n\t\t\t\t\t\t\t\t\t\t<EtapeVoyage etape={etape} photos={etape.photos} />\r\n\t\t\t\t\t\t\t\t\t))}\r\n\t\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t\t</div>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t),\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t};\r\n\t\txhttp.open(\r\n\t\t\t\"GET\",\r\n\t\t\t\"https://wtg.aymerik-diebold.fr/api/trips/\" + parentVoyage.props.id,\r\n\t\t\ttrue\r\n\t\t);\r\n\t\txhttp.send();\r\n\t}\r\n\r\n\trender() {\r\n\t\tlet content = (\r\n\t\t\t<div>\r\n\t\t\t\t<div>{this.state.toRender}</div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t\treturn content;\r\n\t}\r\n}\r\n\r\nexport default ShowVoyage;\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { EnteteVoyage } from \"./ShowVoyage\";\r\nimport ReactDOM from \"react-dom\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\n\r\n// Gere l'ajout d'image et l'affichage. https://stackoverflow.com/questions/38049966/get-image-preview-before-uploading-in-react\r\nclass Upload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tfiles: props.files, // contient l'ensemble des images. Vide initialement. On passe la référence\r\n\t\t\tfilesToShow: []\r\n\t\t}\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\t// when we get images\r\n\thandleChange(event) {\r\n\t\tthis.props.changeButtonState(true);\r\n\t\tthis.setState({\r\n\t\t\tfilesToShow: [...this.state.filesToShow, ...event.target.files] // ajout des nouvelles images a ceux deja existantes\r\n\t\t});\r\n\r\n\t\t//console.log([...event.target.files]);\r\n\t\tvar parentUpload = this;\r\n\t\tvar totalEndUpload = 0;\r\n\t\tvar images = event.target.files;\r\n\t\t[...event.target.files].map(function (file) {\r\n\t\t\t// senf img to imgbb for saving\r\n\t\t\t//console.log('send...');\r\n\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\tvar img = file;\r\n\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\t\t//console.log(\"upload finit\");\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\t\t\t\tconsole.log(\"Upload photo in API success\");\r\n\r\n\t\t\t\t\t\t\t//parentUpload.state.urllist.push(JSON.parse(this.responseText).id); // ajout des nouvelles url d'images a ceux deja existantes\r\n\t\t\t\t\t\t\tparentUpload.props.addImgFile({ image: img, idAPI: JSON.parse(this.responseText).id });\r\n\t\t\t\t\t\t\t//parentUpload.setState({\r\n\t\t\t\t\t\t\t//\tfiles: parentUpload.props.files.concat({ image: img, idAPI: JSON.parse(this.responseText).id }) // ajout des nouvelles images a ceux deja existantes\r\n\t\t\t\t\t\t\t//});\r\n\t\t\t\t\t\t\ttotalEndUpload += 1;\r\n\t\t\t\t\t\t\t//console.log(parentUpload.state.files);\r\n\t\t\t\t\t\t\tif (totalEndUpload == images.length) {\r\n\t\t\t\t\t\t\t\tparentUpload.props.changeButtonState(false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//parentUpload.state.files = [];\r\n\t\t\t\t\t\t\t//parentUpload.state.urllist = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/photos\", true);\r\n\t\t\t\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentUpload.props.token);\r\n\t\t\t\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\t\txhttp.send(JSON.stringify({\r\n\t\t\t\t\t\tpath: JSON.parse(this.responseText).data.link,\r\n\t\t\t\t\t\t//stage: parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\t\tisCover: false\r\n\t\t\t\t\t}));\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\r\n\t\t\txhttp.open(\"POST\", \"https://api.imgur.com/3/image\", true);\r\n\t\t\txhttp.setRequestHeader('Authorization', 'Client-ID 140f137c33f88ac');\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tdata.append('image', file);\r\n\r\n\t\t\txhttp.send(data);\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div ref={this.props.imgcontainer}>\r\n\t\t\t\t\t{/* Display all selected images. */}\r\n\t\t\t\t\t{this.state.filesToShow && [...this.state.filesToShow].map((file) => (\r\n\t\t\t\t\t\t<img width=\"200px\" height=\"200px\" src={URL.createObjectURL(file)} alt=\"Image\" />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<input ref={this.props.refInput} type=\"file\" accept=\"image/*\" multiple onChange={this.handleChange} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// Gere la recherche des villes/adresses dans la popup add new Voyage\r\nclass ResearchBarCity extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.researchRef = React.createRef();\r\n\t}\r\n\r\n\t// Autocomplete for form\r\n\thinter(event) {\r\n\t\t// save change\r\n\t\tthis.props.getdataback(0, 0);\r\n\r\n\t\t// minimum number of characters before we start to generate suggestions\r\n\t\tif (event.target.value.length < 2) return;\r\n\t\telse {\r\n\r\n\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\tvar parentV = this;\r\n\r\n\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\r\n\t\t\t\t\t// We're expecting a json response so we convert it to an object\r\n\t\t\t\t\tvar response = JSON.parse(this.responseText);\r\n\r\n\t\t\t\t\t// clear any previously loaded options in the datalist\r\n\t\t\t\t\tparentV.researchRef.current.innerHTML = \"\";\r\n\r\n\t\t\t\t\tresponse.forEach(function (item) {\r\n\t\t\t\t\t\tvar option = document.createElement('div');\r\n\r\n\t\t\t\t\t\toption.innerText = item.display_name;\r\n\t\t\t\t\t\t// add onclick event : we fill the input\r\n\t\t\t\t\t\toption.onclick = function () {\r\n\t\t\t\t\t\t\tparentV.props.refCity.current.value = this.innerText;\r\n\t\t\t\t\t\t\tparentV.props.getdataback(parseFloat(item.lat), parseFloat(item.lon));\r\n\t\t\t\t\t\t\tparentV.researchRef.current.innerHTML = \"\";\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// attach the div to the list div\r\n\t\t\t\t\t\tparentV.researchRef.current.appendChild(option);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// we use nominatim from openstreetmap to resolve adress\r\n\t\t\txhttp.open(\"GET\", \"https://nominatim.openstreetmap.org/?addressdetails=1&format=json&limit=3&q=\" + this.props.refCity.current.value, true);\r\n\t\t\txhttp.send()\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<input ref={this.props.refCity} type=\"text\" name=\"lville\" placeholder=\"Place..\" id=\"name_input\" onKeyPress={this.hinter.bind(this)} />\r\n\t\t\t\t<div ref={this.researchRef} id=\"huge_list\"></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n/* Parametre : \r\n * arguments {\r\n *\tname {\r\n *\t\tvalue\r\n *\t},\r\n *\tlocation {\r\n *\t\tvalue\r\n *\t},\r\n *\tdate {\r\n *\t\tvalue\r\n *\t},\r\n *\tstory {\r\n *\t\tvalue\r\n *\t},\r\n *\tfiles {\r\n *\t\tvalue\r\n *\t},\r\n * }\r\n */\r\nclass UneEtape extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.refLocation = React.createRef();\r\n\t\tthis.refName = React.createRef();\r\n\t\tthis.refDate = React.createRef();\r\n\t\tthis.refDescription = React.createRef();\r\n\t\tthis.refDateDepart = React.createRef();\r\n\t\tthis.refDepartureTransport = React.createRef();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"etapevoyage\">\r\n\t\t\t\t<button type=\"button\" onClick={() => this.props.editStepLink(this.refName, this.refLocation, this.refDate, this.refDateDepart, this.refDepartureTransport, this.refDescription)}>Edit step</button>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Location : </label>\r\n\t\t\t\t<label ref={this.refLocation}>{this.props.arguments.location}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Step name : </label>\r\n\t\t\t\t<label ref={this.refName}>{this.props.arguments.name}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Arrival date : </label>\r\n\t\t\t\t<label ref={this.refDate}>{this.props.arguments.date}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Departure date : </label>\r\n\t\t\t\t<label ref={this.refDateDepart}>{this.props.arguments.dateDepart}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Moyen de transport : </label>\r\n\t\t\t\t<label ref={this.refDepartureTransport}>{this.props.arguments.departureTransport}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Your story : </label>\r\n\t\t\t\t<label ref={this.refDescription}>{this.props.arguments.description}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t{this.props.arguments.files && [...this.props.arguments.files].map((file, i) => (\r\n\t\t\t\t\t<img key={i} width=\"200px\" height=\"200px\" src={URL.createObjectURL(file.image)} alt=\"Image\" />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// seconde vue de la création de voyage : permet d'ajouter des etapes\r\nclass CreationVoyageAjoutEtapes extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tname: props.name,\r\n\t\t\tdescription: props.description,\r\n\t\t\tvegan: props.vegan,\r\n\t\t\tecolo: props.ecolo,\r\n\t\t\tvoyageId: props.voyageId,\r\n\t\t\teditStepBool: false,\r\n\r\n\t\t\tfiles: []\r\n\t\t};\r\n\r\n\t\tthis.setTextInputRef = React.createRef();\r\n\r\n\t\tthis.inputphotoToReset = React.createRef();\r\n\t\tthis.imgcontainer = React.createRef();\r\n\r\n\t\tthis.toggleModal = this.toggleModal.bind(this)\r\n\t\tthis.getLatLnt = this.getLatLnt.bind(this);\r\n\t\tthis.editStep = this.editStep.bind(this);\r\n\t\tthis.changeEnteteBackground = this.changeEnteteBackground.bind(this);\r\n\r\n\t\tthis.newCity = React.createRef();\r\n\t\tthis.newName = React.createRef();\r\n\t\tthis.newDate = React.createRef();\r\n\t\tthis.newDateDepart = React.createRef();\r\n\t\tthis.newDepartureTransport = React.createRef();\r\n\t\tthis.newDescription = React.createRef();\r\n\r\n\t\tthis.newLat = React.createRef();\r\n\t\tthis.newLnt = React.createRef();\r\n\t\tthis.boutonOK = React.createRef();\r\n\r\n\t\tthis.refHead = React.createRef();\r\n\t}\r\n\r\n\teditStep(refName, refLocation, refDate, refDateDepart, refDepartureTransport, refDescription) {\r\n\t\t//console.log(\"EDIT !\");\r\n\t\t// reset values of components in the modal\r\n\t\tthis.newDescription.current.value = this.state.stepDescription;\r\n\t\tthis.newName.current.value = this.state.stepName;\r\n\t\tthis.newDate.current.value = this.state.stepDate;\r\n\t\tthis.newDateDepart.current.value = this.state.stepDateDepart;\r\n\t\tthis.newDepartureTransport.current.value = this.state.stepDepartureTransport;\r\n\t\tthis.newCity.current.value = this.state.stepCity;\r\n\r\n\r\n\t\tthis.setState({\r\n\t\t\teditStepBool: true,\r\n\t\t\trefLocation: refLocation,\r\n\t\t\tstepDate: refDate,\r\n\t\t\tstepDateDepart: refDateDepart,\r\n\t\t\tstepDepartureTransport: refDepartureTransport,\r\n\t\t\trefDescription: refDescription,\r\n\t\t\trefName: refName,\r\n\t\t})\r\n\r\n\t\t//console.log(this.state.refLocation);\r\n\r\n\t\tdocument.querySelector(\".modal\").classList.toggle(\"show-modal\");\r\n\t}\r\n\r\n\taddEtapeVoyage() {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentVoyage = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\t//console.log(this.responseText);\r\n\t\t\tvar res = this.responseText;\r\n\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\tif (parentVoyage.state.editStepBool == false) {\r\n\t\t\t\t\tReactDOM.render(<UneEtape arguments={\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"location\": parentVoyage.newCity.current.value,\r\n\t\t\t\t\t\t\t\"files\": parentVoyage.state.files,\r\n\t\t\t\t\t\t\t\"description\": parentVoyage.newDescription.current.value,\r\n\t\t\t\t\t\t\t\"date\": parentVoyage.newDate.current.value,\r\n\t\t\t\t\t\t\t\"dateDepart\": parentVoyage.newDateDepart.current.value,\r\n\t\t\t\t\t\t\t\"departureTransport\": parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\t\t\t\"name\": parentVoyage.newName.current.value\r\n\t\t\t\t\t\t}} editStepLink={parentVoyage.editStep} />, parentVoyage.setTextInputRef.current.appendChild(document.createElement('div')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparentVoyage.state.refLocation.current.textContent = parentVoyage.newCity.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDate.current.textContent = parentVoyage.newDate.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDateDepart.current.textContent = parentVoyage.newDateDepart.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDepartureTransport.current.textContent = parentVoyage.newDepartureTransport.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDescription.current.textContent = parentVoyage.newDescription.current.value;\r\n\t\t\t\t\tparentVoyage.state.refName.current.textContent = parentVoyage.newName.current.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// maintenant on envoi le transport\r\n\t\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\t\t\t//console.log(\"Upload transport etape success\");\r\n\t\t\t\t\t\tparentVoyage.state.editStepBool = false;\r\n\t\t\t\t\t\tparentVoyage.toggleModal();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/transports\", true);\r\n\t\t\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentVoyage.props.token);\r\n\t\t\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\txhttp.send(JSON.stringify({\r\n\t\t\t\t\tstageFrom: \"/api/stages/\" + JSON.parse(res).id,\r\n\t\t\t\t\ttype: parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\tdistance: 0\r\n\t\t\t\t}));\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.setState({\r\n\t\t\tstepDescription: this.newDescription.current.value,\r\n\t\t\tstepName: this.newName.current.value,\r\n\t\t\tstepDate: this.newDate.current.value,\r\n\t\t\tstepDateDepart: this.newDateDepart.current.value,\r\n\t\t\tstepDepartureTransport: this.newDepartureTransport.current.value,\r\n\t\t\tstepId: this.state.voyageId,\r\n\t\t\tstepLat: this.state.newLat,\r\n\t\t\tstepLnt: this.state.newLnt,\r\n\t\t\tstepCity: this.newCity.current.value,\r\n\t\t\tstepFiles: this.state.files\r\n\t\t})\r\n\r\n\t\tvar listformat = [];\r\n\t\t//console.log(this.state.files);\r\n\t\tthis.state.files.forEach(function (item) {\r\n\t\t\tlistformat.push(\"/api/photos/\" + item.idAPI);\r\n\t\t});\r\n\t\t//console.log(listformat);\r\n\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/stages\", true);\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + this.props.token);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\tcity: this.newCity.current.value,\r\n\t\t\tcountry: \"rien\",\r\n\t\t\tmark: 0,\r\n\t\t\tdescription: this.newDescription.current.value,\r\n\t\t\tarrival: this.newDate.current.value,\r\n\t\t\tdeparture: this.newDateDepart.current.value,\r\n\t\t\t//departureTransport: this.newDepartureTransport.current.value,\r\n\t\t\ttrip: \"/api/trips/\" + this.state.voyageId,\r\n\t\t\tlng: this.state.newLat,\r\n\t\t\tlat: this.state.newLnt,\r\n\t\t\ttitle: this.newName.current.value,\r\n\t\t\tphotos: listformat\r\n\t\t}));\r\n\t}\r\n\r\n\ttoggleModal() {\r\n\t\tdocument.querySelector(\".modal\").classList.toggle(\"show-modal\");\r\n\r\n\t\t// reset values of components in the modal\r\n\t\tthis.newDescription.current.value = \"\";\r\n\t\tthis.newName.current.value = \"\";\r\n\t\tthis.newDate.current.value = \"\";\r\n\t\tthis.newDateDepart.current.value = \"\";\r\n\t\tthis.newDepartureTransport.current.value = \"\";\r\n\t\tthis.newCity.current.value = \"\";\r\n\t\tthis.inputphotoToReset.current.value = \"\";\r\n\t\tthis.imgcontainer.current.textContent = \"\"; // textContent is faster than innerHTML\r\n\r\n\t\tthis.setState({\r\n\t\t\tfiles: []\r\n\t\t})\r\n\t}\r\n\r\n\tchangeButtonState(etat) {\r\n\t\tthis.boutonOK.current.disabled = etat;\r\n\t\tif (etat == true)\r\n\t\t\tthis.boutonOK.current.textContent = \"Image upload in progress...\"\r\n\t\telse\r\n\t\t\tthis.boutonOK.current.textContent = \"Add step\"\r\n\t\t//console.log(\"change etat avec : \", etat);\r\n\t}\r\n\r\n\tgetLatLnt(lat, lnt) {\r\n\t\tthis.setState({\r\n\t\t\tnewLnt: lnt,\r\n\t\t\tnewLat: lat\r\n\t\t})\r\n\t}\r\n\r\n\tchangeEnteteBackground(event) {\r\n\t\tthis.refHead.current.style.backgroundImage = \"linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('\" + URL.createObjectURL(event.target.files[0]) + \"')\";\r\n\t}\r\n\r\n\taddImgFile(img) {\r\n\t\tthis.setState({\r\n\t\t\tfiles: this.state.files.concat(img) // ajout des nouvelles images a ceux deja existantes\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"information\">\r\n\t\t\t\t<EnteteVoyage param={{ changeCover: this.changeEnteteBackground, edit: true, refHead: this.refHead, title: this.state.name, description: this.state.description, vegan: this.state.vegan, ecolo: this.state.ecolo, stages: [], author: { firstName: \"Nicolas\", lastName: \"Dupond\" } }} />\r\n\r\n\t\t\t\t<div ref={this.setTextInputRef}></div>\r\n\r\n\t\t\t\t<div class=\"modal\">\r\n\t\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t\t<span class=\"close-button\" onClick={this.toggleModal}>×</span>\r\n\t\t\t\t\t\t{/*https://community.algolia.com/places/documentation.html#getting-started */}\r\n\t\t\t\t\t\t<label for=\"lville\">Location</label>\r\n\t\t\t\t\t\t<ResearchBarCity refCity={this.newCity} getdataback={this.getLatLnt} newLat={this.newLat} newLnt={this.newLnt} />\r\n\r\n\t\t\t\t\t\t<label for=\"nometape\">Step name</label>\r\n\t\t\t\t\t\t<input ref={this.newName} type=\"text\" id=\"nometape\" name=\"nometape\" placeholder=\"ex. Promenade dans Paris\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"larrivee\">Arrival date</label>\r\n\t\t\t\t\t\t<input ref={this.newDate} type=\"text\" id=\"larrivee\" name=\"larrivee\" placeholder=\"Arrivée..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ldepart\">Departure date</label>\r\n\t\t\t\t\t\t<input ref={this.newDateDepart} type=\"text\" id=\"ldepart\" name=\"ldepart\" placeholder=\"Arrivée..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ltransport\">Moyen de transport entre étapes</label>\r\n\t\t\t\t\t\t<input ref={this.newDepartureTransport} type=\"text\" id=\"ltransport\" name=\"ltransport\" placeholder=\"Moyen transport..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ldescription\">Your story</label>\r\n\t\t\t\t\t\t<textarea ref={this.newDescription} id=\"ldescription\" name=\"ldescription\" placeholder=\"Ce que vous voulez...\"></textarea>\r\n\r\n\t\t\t\t\t\t<Upload token={this.props.token} addImgFile={this.addImgFile.bind(this)} files={this.state.files} changeButtonState={this.changeButtonState.bind(this)} imgcontainer={this.imgcontainer} refInput={this.inputphotoToReset} />\r\n\r\n\t\t\t\t\t\t<button type=\"button\" ref={this.boutonOK} onClick={this.addEtapeVoyage.bind(this)}>Add step</button>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class=\"trigger\" onClick={this.toggleModal}>Add a step</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nclass ModalChargement extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"modal_chargement\">\r\n\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t<p>Chargement</p>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nclass CreationVoyage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.description = React.createRef();\r\n\t\tthis.name = React.createRef();\r\n\t\tthis.vegan = React.createRef();\r\n\t\tthis.ecolo = React.createRef();\r\n\t}\r\n\r\n\taddVoyageCheck() {\r\n\t\tif (this.description.current.validity.valid && this.name.current.validity.valid) {\r\n\t\t\tthis.props.addMyVoyage(this.name.current.value, this.description.current.value, this.vegan.current.checked, this.ecolo.current.checked)\r\n\t\t} else alert(\"Please complete the Details section\")\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"formulaire\">\r\n\t\t\t\t<h3>New trip</h3>\r\n\r\n\t\t\t\t<div className=\"partie\">\r\n\t\t\t\t\t<h4>Détails</h4>\r\n\t\t\t\t\t<div className=\"partiedetails\">\r\n\t\t\t\t\t\t<p className=\"partieLabel\">Trip name:</p>\r\n\t\t\t\t\t\t<input required type=\"text\" ref={this.name} id=\"fname\" name=\"firstname\" placeholder=\"ex. A grand tour of France\"></input>\r\n\r\n\t\t\t\t\t\t<p className=\"partieLabel\">Trip summary:</p>\r\n\t\t\t\t\t\t<textarea required ref={this.description} id=\"lname\" name=\"lastname\" placeholder=\"ex. A bucolic journey through the French countryside: old relics and local specialities\"></textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t<div className=\"partie\">\r\n\t\t\t\t\t<h4>Parameters</h4>\r\n\t\t\t\t\t<div className=\"partiedetails\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input ref={this.vegan} type=\"checkbox\" id=\"voyagevegan\" name=\"voyagevegan\" value=\"newsletter\"></input>\r\n\t\t\t\t\t\t\t<label htmlFor=\"voyagevegan\">Is this trip vegan?</label>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input ref={this.ecolo} type=\"checkbox\" id=\"voyageecolo\" name=\"voyageecolo\" value=\"newsletter\"></input>\r\n\t\t\t\t\t\t\t<label htmlFor=\"voyageecolo\">Is this trip environmentally friendly?</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t<button type=\"button\" className=\"boutonsend\" onClick={this.addVoyageCheck.bind(this)}>Add my trip</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default class AddVoyage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\ttoken: props.token,\r\n\t\t\tstartNewVoyage: true,\r\n\t\t\tchargement: false,\r\n\r\n\t\t\tname: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tvegan: false,\r\n\t\t\tecolo: false\r\n\t\t};\r\n\r\n\t\tthis.renouvelerToken = this.renouvelerToken.bind(this);\r\n\t\tthis.addMyVoyage = this.addMyVoyage.bind(this)\r\n\t}\r\n\r\n\trenouvelerToken() {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentToken = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\tparentToken.state.token = JSON.parse(this.responseText).token;\r\n\t\t\t\tparentToken.props.updateToken(parentToken.state.token);\r\n\t\t\t\tparentToken.addMyVoyage(parentToken.state.name, parentToken.state.description, parentToken.state.vegan, parentToken.state.ecolo);\r\n\t\t\t}\r\n\t\t};\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/login_check\", true);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\t\"username\": \"mailleon@gmail.com\",\r\n\t\t\t\"password\": \"monmdp111A!\"\r\n\t\t}));\r\n\t}\r\n\r\n\taddMyVoyage(newname, newdescription, newvegan, newecolo) {\r\n\t\t//console.log(newname, newdescription, newvegan, newecolo);\r\n\t\tthis.setState({\r\n\t\t\tname: newname,\r\n\t\t\tdescription: newdescription,\r\n\t\t\tvegan: newvegan,\r\n\t\t\tecolo: newecolo,\r\n\t\t\tchargement: true\r\n\t\t})\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentVoyage = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\t//console.log(this.responseText);\r\n\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\tvar res = JSON.parse(this.responseText);\r\n\t\t\t\tparentVoyage.setState({\r\n\t\t\t\t\tchargement: false,\r\n\t\t\t\t\tstartNewVoyage: false,\r\n\t\t\t\t\tvoyageId: res.id\r\n\t\t\t\t})\r\n\t\t\t} else if (this.readyState === 4 && this.status === 401) {\r\n\t\t\t\tconsole.log(\"Token non valide, renouvellement...\");\r\n\t\t\t\tconsole.log(parentVoyage.state.token)\r\n\t\t\t\tparentVoyage.renouvelerToken();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/trips\", true);\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentVoyage.state.token);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\t\"title\": newname,\r\n\t\t\t\"description\": newdescription,\r\n\t\t\t\"vegan\": newvegan,\r\n\t\t\t\"ecological\": newecolo,\r\n\t\t\t\"author\": \"api/users/\" + parentVoyage.props.connected,\r\n\t\t\t\"keywords\": \"paris plage\",\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<NavigationBar active={1} token={this.props.token} connected={this.props.connected} connect={this.props.connect} />\r\n\r\n\t\t\t\t{this.state.startNewVoyage ?\r\n\t\t\t\t\t!this.state.chargement ?\r\n\t\t\t\t\t\t<CreationVoyage token={this.state.token} addMyVoyage={this.addMyVoyage.bind(this)} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<ModalChargement />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<CreationVoyageAjoutEtapes token={this.state.token} voyageId={this.state.voyageId} name={this.state.name} vegan={this.state.vegan} ecolo={this.state.ecolo} description={this.state.description} />\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport \"./App.css\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\nexport default class ShowCarte extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      voyages: [],\r\n\r\n      lat: 48.856614, // centr� sur Paris\r\n      lng: 2.3522219,\r\n      zoom: 2,\r\n    };\r\n\r\n    this.loadTrips(this);\r\n  }\r\n\r\n  loadTrips(parentThis) {\r\n    //let liste = []\r\n    var xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = function () {\r\n      if (this.readyState === 4 && this.status === 200) {\r\n        parentThis.setState({\r\n          voyages: JSON.parse(this.response)[\"hydra:member\"], // stock all trips\r\n        });\r\n        console.log(JSON.parse(this.response));\r\n      }\r\n    };\r\n    xhttp.open(\"GET\", \"https://wtg.aymerik-diebold.fr/api/trips\", true);\r\n    xhttp.send();\r\n\r\n    /*for (let i = 333; i < 335; i++) {\r\n\t\t\t// delete all\r\n\t\t\tvar xhttp2 = new XMLHttpRequest();\r\n\t\t\txhttp2.onreadystatechange = function () {\r\n\t\t\t\tconsole.log(this.response);\r\n\t\t\t};\r\n\t\t\txhttp2.open(\"DELETE\", \"https://wtg.aymerik-diebold.fr/api/trips/\"+i, true);\r\n\t\t\txhttp2.setRequestHeader('Authorization', 'Bearer ' + this.props.token);\r\n\t\t\txhttp2.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\txhttp2.send();\r\n\t\t}*/\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <NavigationBar\r\n          active={0}\r\n          token={this.props.token}\r\n          connected={this.props.connected}\r\n          connect={this.props.connect}\r\n        />\r\n\r\n        <Map\r\n          id=\"principalMap\"\r\n          center={[this.state.lat, this.state.lng]}\r\n          zoom={this.state.zoom}\r\n        >\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n\r\n          {this.state.voyages.map((voyage) =>\r\n            voyage.stages.map((etape) => (\r\n              <Marker position={[etape.lng, etape.lat]}>\r\n                <Popup>\r\n                  <h1>{voyage.title}</h1>\r\n                  <a href={\"?show=trip&id=\" + voyage.id}>Cliquez</a>\r\n                </Popup>\r\n              </Marker>\r\n            ))\r\n          )}\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\r\nimport NavigationBar from \"./NavigationBar\";\r\nimport Axios from \"axios\";\r\n\r\nexport class Profile extends Component {\r\n  state = {\r\n    email: \"\",\r\n    firstname: \"\",\r\n    lastname: \"\",\r\n    id: \"\",\r\n    trips: [],\r\n    recordedTrips: [],\r\n  };\r\n\r\n  getUserInfo = () => {\r\n    // GET /api/me\r\n    Axios.get(\"https://wtg.aymerik-diebold.fr/api/me\", {\r\n      headers: { Authorization: \"Bearer \" + this.props.token },\r\n    })\r\n      .then((res) => {\r\n        console.log(res);\r\n        this.setState({\r\n          email: res.data.email,\r\n          firstname: res.data.firstName,\r\n          lastname: res.data.lastName,\r\n          id: res.data.id,\r\n          trips: res.data.trips,\r\n          recordedTrips: res.data.recordedTrips,\r\n        });\r\n      })\r\n      .catch((err) => {\r\n        console.log(\"Not connected\");\r\n        throw err;\r\n      });\r\n  };\r\n\r\n  getTrips = () => {\r\n    // GET /trips\r\n    console.log(\"get trips\");\r\n    console.log(this.state.trips);\r\n    for (let i = 0; i < this.state.trips.length; i++) {\r\n      Axios.get(\r\n        \"https://wtg.aymerik-diebold.fr/api/trips/\" +\r\n          this.state.trips[i].split(\"/\")[3]\r\n      )\r\n        .then((res) => {\r\n          console.log(res);\r\n          this.setState({\r\n            tripTitles: [\r\n              ...this.state.tripTitles,\r\n              { id: res.data.id, title: res.data.title },\r\n            ],\r\n          });\r\n        })\r\n        .catch((err) => {\r\n          throw err;\r\n        });\r\n    }\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.getUserInfo();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"profile\">\r\n        <NavigationBar\r\n          active=\"4\"\r\n          connected={this.props.connected}\r\n          connect={this.props.connect}\r\n        />\r\n        {this.props.connected ? (\r\n          <div className=\"profileContainer\" style={containerStyle}>\r\n            <h1>My Profile</h1>\r\n            <h3 style={{ backgroundColor: \"inherit\" }}>Personal Info</h3>\r\n            <div className=\"profileBox\" style={boxStyle}>\r\n              <div>\r\n                <p>Email</p>\r\n                <p>Firstname</p>\r\n                <p>Lastname</p>\r\n              </div>\r\n              <div>\r\n                <p>{this.state.email}</p>\r\n                <p>{this.state.firstname}</p>\r\n                <p>{this.state.lastname}</p>\r\n              </div>\r\n            </div>\r\n            <div style={trips}>\r\n              <div className=\"my-trips\">\r\n                <h3 style={{ backgroundColor: \"inherit\" }}>My trips</h3>\r\n                {this.state.trips.map((trip) => (\r\n                  <p>\r\n                    <a href={\"?show=trip&id=\" + trip.id}>{trip.title}</a>\r\n                  </p>\r\n                ))}\r\n                <a href=\"?show=save\" style={{ color: \"red\" }}>\r\n                  Add trip!\r\n                </a>\r\n              </div>\r\n              <div className=\"recorded-trips\">\r\n                <h3 style={{ backgroundColor: \"inherit\" }}>Favorite trips</h3>\r\n                {this.state.recordedTrips.length !== 0 ? (\r\n                  this.state.recordedTrips.map((trip) => (\r\n                    <p>\r\n                      <a href={\"?show=trip&id=\" + trip.id}>{trip.title}</a>\r\n                    </p>\r\n                  ))\r\n                ) : (\r\n                  <p>\r\n                    You don't have any favorite trip :(\r\n                    <a href=\"/WaysToGo\" style={{ display: \"block\" }}>\r\n                      Browse trips to save your favorite!\r\n                    </a>\r\n                  </p>\r\n                )}\r\n              </div>\r\n            </div>\r\n          </div>\r\n        ) : (\r\n          <p>Please log in</p>\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nconst containerStyle = {\r\n  textAlign: \"center\",\r\n  backgroundColor: \"#f3f3f3\",\r\n  width: \"50%\",\r\n  margin: \"auto\",\r\n};\r\n\r\nconst boxStyle = {\r\n  display: \"flex\",\r\n  justifyContent: \"space-around\",\r\n};\r\n\r\nconst trips = {\r\n  display: \"flex\",\r\n  justifyContent: \"space-around\",\r\n};\r\n\r\nexport default Profile;\r\n","import React, { Component } from \"react\";\r\n//import ReactDom from 'react-dom'\r\n//import ObjectList from 'react-object-list'\r\n//import { List } from 'react-object-list/renderers'\r\nimport \"./App.css\";\r\nimport NavigationBar from './NavigationBar';\r\n\r\n\r\n\r\nclass SearchForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            city: props.city,\r\n            title: props.title,\r\n            keyword: props.keyword,\r\n            chercher: props.chercher,\r\n            vegan: props.vegan,\r\n            ecolo: props.ecolo,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"formulaire\">\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">Title:</p>\r\n                    <input required type=\"text\" ref={this.state.title} id=\"title\" name=\"title\" placeholder=\"\"></input>\r\n                </div>\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">Keyword:</p>\r\n                    <input required type=\"text\" ref={this.state.keyword} id=\"keyword\" name=\"keyword\" placeholder=\"ex. Paris\"></input>\r\n                </div>\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">City:</p>\r\n                    <input required type=\"text\" ref={this.state.city} id=\"rcity\" name=\"city\" placeholder=\"ex. Rome\"></input>\r\n                </div>\r\n\r\n                <div class=\"partiedetails\">\r\n                    <div>\r\n                        <input ref={this.state.vegan} type=\"checkbox\" id=\"voyagevegan\" name=\"voyagevegan\" value=\"newsletter\"></input>\r\n                        <label htmlFor=\"voyagevegan\">Vegan?</label>\r\n                    </div>\r\n\r\n                    <div>\r\n                        <input ref={this.state.ecolo} type=\"checkbox\" id=\"voyageecolo\" name=\"voyageecolo\" value=\"newsletter\"></input>\r\n                        <label htmlFor=\"voyageecolo\">Environmentally friendly?</label>\r\n                    </div>\r\n                </div>\r\n\r\n                <button type=\"button\" class=\"boutonsend\" onClick={this.state.chercher}>Chercher</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ResultList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            city: props.city,\r\n            keyword: props.keyword,\r\n            title: props.title,\r\n            vegan: props.vegan,\r\n            ecolo: props.ecolo,\r\n            voyages: [],\r\n        };\r\n        this.loadDoc(this);\r\n    }\r\n\r\n    loadDoc(parentThis) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState === 4 && this.status === 200) {\r\n                parentThis.setState({\r\n                    voyages: JSON.parse(this.response)['hydra:member'],\r\n                });\r\n                //console.log(parentThis.state.voyages);\r\n            }\r\n        };\r\n        \r\n        var url = \"https://wtg.aymerik-diebold.fr/api/trips?\";\r\n        var firstParam = true;\r\n        if (parentThis.state.title.length > 0) {\r\n            url = url.concat(\"title=\", parentThis.state.title);\r\n            firstParam = false;\r\n        };\r\n        if (parentThis.state.keyword.length > 0) {\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"keywords=\", parentThis.state.keyword);\r\n            firstParam = false;\r\n        };\r\n        if (parentThis.state.city.length > 0) {\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"stages.city=\", parentThis.state.city);\r\n            firstParam = false;\r\n        };\r\n\r\n        if (parentThis.state.vegan) {\r\n            console.log(parentThis.state.vegan, firstParam);\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"vegan=true\");\r\n            firstParam = false;\r\n        };\r\n\r\n        if (parentThis.state.ecolo) {\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"ecological=true\");\r\n        };\r\n\r\n        console.log(url)\r\n        xhttp.open(\"GET\",url, true);\r\n        xhttp.send();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id=\"recherche\">\r\n                    <h4> Results of\r\n                    <ul>\r\n                            <li>Title: \"{this.state.title}\" </li>\r\n                            <li>Keyword: \"{this.state.keyword}\" </li>\r\n                            <li>City: \"{this.state.city}\" </li>\r\n                            <li>Vegan: \"{this.state.vegan ? 'True' : ''}\" </li>\r\n                            <li>Ecological: \"{this.state.ecolo ? 'True' : ''}\" </li>\r\n                        </ul>\r\n                    </h4>\r\n                </div>\r\n\r\n                <div id='table'>\r\n                    \r\n                    {this.state.voyages.length > 0 ? (\r\n                        <table>\r\n                            <thead>\r\n                                <tr>\r\n                                    <th>Title</th>\r\n                                    <th>Author</th>\r\n                                    <th>Description</th>\r\n                                    <th>Lien</th>\r\n                                </tr>\r\n                            </thead>\r\n\r\n                            <tbody>\r\n                                {this.state.voyages.map((voyage) => (\r\n                                    <tr>\r\n                                        <td>{voyage.title}</td>\r\n                                        <td>{voyage.author.firstName} {voyage.author.lastNqme}</td>\r\n                                        <td>{voyage.description}</td>\r\n                                        <td><a href={\"?show=trip&id=\" + voyage.id}>Cliquez</a></td>\r\n                                    </tr>\r\n\r\n                                ))}\r\n                            </tbody>\r\n                        </table>) : (\r\n                            <div>\r\n                                <p>Not found</p>\r\n                                <a href=\"?show=research\">Return</a>\r\n                            </div>)\r\n                    }\r\n                        \r\n\r\n                    \r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport default class SearchResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: props.id,\r\n            startNewSearch: true,\r\n            vegan: false,\r\n            ecolo: false,\r\n            toRender: <h1>Chargement en cours...</h1>\r\n        };\r\n\r\n        this.city = React.createRef();\r\n        this.title = React.createRef();\r\n        this.keyword = React.createRef();\r\n        this.vegan = React.createRef();\r\n        this.ecolo = React.createRef();\r\n\r\n        // Cette liaison est n�c�ssaire afin de permettre l'utilisation de `this` dans la fonction de rappel.\r\n        this.chercher = this.chercher.bind(this);\r\n    }\r\n\r\n    chercher() {\r\n        if (this.city.current.validity.valid || this.title.current.validity.valid ||\r\n            this.keyword.current.validity.valid) {\r\n            this.setState({\r\n                city: this.city.current.value,\r\n                keyword: this.keyword.current.value,\r\n                title: this.title.current.value,\r\n                vegan: this.vegan.current.checked,\r\n                ecolo: this.ecolo.current.checked,\r\n                startNewSearch: false,\r\n            });\r\n        }\r\n        else alert(\"Veillez completer au moins un champ pour chercher\")\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <NavigationBar active=\"5\" />\r\n\r\n                {this.state.startNewSearch ?\r\n                    <SearchForm city={this.city} title={this.title} keyword={this.keyword} vegan={this.vegan} ecolo={this.ecolo} chercher={this.chercher} />\r\n                    :\r\n                    <ResultList city={this.city.current.value} title={this.title.current.value} keyword={this.keyword.current.value} vegan={this.vegan.current.checked} ecolo={this.ecolo.current.checked} />\r\n\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n}","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\nexport default class About extends Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<NavigationBar\r\n\t\t\t\t\tactive={3}\r\n\t\t\t\t\ttoken={this.props.token}\r\n\t\t\t\t\tconnected={this.props.connected}\r\n\t\t\t\t\tconnect={this.props.connect}\r\n\t\t\t\t/>\r\n\r\n\t\t\t\t<h2>WaysToGo</h2>\r\n\t\t\t\t<h3>Explore. Share. Discover.</h3>\r\n\t\t\t\t<p>WaysToGo allows you to share your trips to everyone. <br></br>Search new trips, begin new adventures :)</p>\r\n\t\t\t\t<p>Founded by Caroline Texier and Arnaud Stoffel</p>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport Cookies from \"universal-cookie\";\r\nimport \"./App.css\";\r\nimport ShowVoyage from \"./ShowVoyage.js\";\r\nimport AddVoyage from \"./AddVoyage.js\";\r\nimport ShowCarte from \"./ShowCarte.js\";\r\nimport Profile from \"./Profile\";\r\nimport SearchResult from \"./SearchResult.js\";\r\nimport About from \"./About.js\";\r\nimport Axios from \"axios\";\r\n\r\nexport default class App extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const cookies = new Cookies();\r\n    const urlParams = new URLSearchParams(window.location.search);\r\n    let token = cookies.get(\"token\") ? cookies.get(\"token\") : false;\r\n\r\n    if (urlParams.get(\"logout\")) {\r\n      this.disconnect();\r\n      token = false;\r\n    }\r\n\r\n    this.state = {\r\n      pageActuelle: urlParams.get(\"show\"), // on recupere la page a afficher via les arguments de l'URL\r\n      trip: urlParams.get(\"id\"),\r\n      connected: token ? true : false,\r\n      token: token ? token : \"\",\r\n    };\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.state.token) {\r\n      console.log(\"Connected!\");\r\n      Axios.get(\"https://wtg.aymerik-diebold.fr/api/me\", {\r\n        headers: { Authorization: \"Bearer \" + this.state.token },\r\n      })\r\n        .then((res) => {\r\n          this.setState({ connected: res.data.id });\r\n          console.log(document.cookie);\r\n        })\r\n        .catch((err) => {\r\n          console.log(\"wut\");\r\n          console.log(this.state.token);\r\n          this.setState({ connected: false, token: \"\" });\r\n          const cookies = new Cookies();\r\n          cookies.remove(\"token\", { path: \"/\" });\r\n          throw err;\r\n        });\r\n    }\r\n  }\r\n\r\n  connect = (token) => {\r\n    console.log(\"Connected!\");\r\n    this.setState({ connected: true, token });\r\n    const cookies = new Cookies();\r\n    cookies.set(\"token\", token, { path: \"/\" });\r\n  };\r\n\r\n  disconnect = () => {\r\n    const cookies = new Cookies();\r\n    cookies.remove(\"token\", { path: \"/\" });\r\n    this.setState({ connected: false, token: \"\" });\r\n    console.log(\"Disconnected\");\r\n  };\r\n\r\n  render() {\r\n    if (this.state.pageActuelle === \"trip\") {\r\n      return (\r\n        <ShowVoyage\r\n          id={this.state.trip}\r\n          connected={this.state.connected}\r\n          connect={this.connect}\r\n        />\r\n      );\r\n    } else if (this.state.pageActuelle === \"save\") {\r\n      return (\r\n        <AddVoyage\r\n          token={this.state.token}\r\n          connected={this.state.connected}\r\n          connect={this.connect}\r\n        />\r\n      );\r\n    } else if (this.state.pageActuelle === \"profile\") {\r\n      return (\r\n        <Profile\r\n          connected={this.state.connected}\r\n          token={this.state.token}\r\n          connect={this.connect}\r\n        />\r\n      );\r\n    } else if (this.state.pageActuelle === \"research\") {\r\n      return <SearchResult />;\r\n    } else if (this.state.pageActuelle === \"about\") {\r\n      return (\r\n        <About\r\n          token={this.state.token}\r\n          connected={this.state.connected}\r\n          connect={this.connect}\r\n        />\r\n      );\r\n    } else {\r\n      return (\r\n        <ShowCarte connected={this.state.connected} connect={this.connect} />\r\n      );\r\n    }\r\n  }\r\n}\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' },\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}
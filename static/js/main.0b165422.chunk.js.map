{"version":3,"sources":["NavigationBar.js","ShowVoyage.js","AddVoyage.js","ShowCarte.js","Profile.js","SearchResult.js","App.js","serviceWorker.js","index.js"],"names":["NavigationBar","state","showLogin","showRegister","email","password","password2","firstname","lastname","registerSuccess","registerMessage","e","setState","onChange","target","name","value","onSubmitLogin","preventDefault","console","log","Axios","post","username","headers","then","res","props","connect","data","token","catch","err","onSubmitRegister","success","getStyleLogin","display","getStyleRegister","class","this","active","href","connected","onClick","id","style","type","placeholder","Component","EnteteVoyage","param","monthNames","etapes","length","d","Date","departure","getMonth","arrival","Math","ceil","date1","date2","getDateDebut","getDateFin","a","ref","refHead","title","startdate","getMonthsDate1","stages","description","vegan","ecological","author","firstName","lastName","getDureeVoyage2","enddate","getDureeVoyage1","edit","for","border","visibility","accept","changeCover","EtapeVoyage","etape","city","photos","map","photo","i","key","src","path","alt","height","width","departureTransport","React","ShowVoyage","loadDoc","titre","toRender","parentVoyage","xhttp","XMLHttpRequest","onreadystatechange","readyState","status","JSON","parse","responseText","Map","center","zoom","TileLayer","attribution","url","Marker","position","lng","lat","Popup","open","send","Upload","files","filesToShow","handleChange","bind","event","changeButtonState","parentUpload","totalEndUpload","images","file","img","addImgFile","image","idAPI","setRequestHeader","stringify","link","isCover","FormData","append","imgcontainer","URL","createObjectURL","refInput","multiple","ResearchBarCity","researchRef","createRef","getdataback","parentV","response","current","innerHTML","forEach","item","option","document","createElement","innerText","display_name","onclick","refCity","parseFloat","lon","appendChild","onKeyPress","hinter","UneEtape","refLocation","refName","refDate","refDescription","refDateDepart","refDepartureTransport","editStepLink","arguments","location","date","dateDepart","CreationVoyageAjoutEtapes","ecolo","voyageId","editStepBool","setTextInputRef","inputphotoToReset","toggleModal","getLatLnt","editStep","changeEnteteBackground","newCity","newName","newDate","newDateDepart","newDepartureTransport","newDescription","newLat","newLnt","boutonOK","stepDescription","stepName","stepDate","stepDateDepart","stepDepartureTransport","stepCity","querySelector","classList","toggle","ReactDOM","render","textContent","stageFrom","distance","stepId","stepLat","stepLnt","stepFiles","listformat","push","country","mark","trip","etat","disabled","lnt","backgroundImage","concat","addEtapeVoyage","ModalChargement","CreationVoyage","validity","valid","addMyVoyage","checked","alert","className","required","htmlFor","addVoyageCheck","AddVoyage","startNewVoyage","chargement","renouvelerToken","parentToken","updateToken","newname","newdescription","newvegan","newecolo","ShowCarte","voyages","loadTrips","parentThis","voyage","Profile","containerStyle","boxStyle","textAlign","margin","justifyContent","SearchForm","keyword","chercher","ResultList","firstParam","lastNqme","SearchResult","startNewSearch","App","Cookies","set","cookies","get","urlParams","URLSearchParams","window","search","pageActuelle","Boolean","hostname","match","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.0b165422.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"./App.css\";\nimport Axios from \"axios\";\n\nexport default class NavigationBar extends Component {\n  state = {\n    showLogin: false,\n    showRegister: false,\n    email: \"\",\n    password: \"\",\n    password2: \"\",\n    firstname: \"\",\n    lastname: \"\",\n    registerSuccess: \"\",\n    registerMessage: \"\",\n  };\n\n  showLogin = (e) => {\n    this.setState({ showLogin: !this.state.showLogin, showRegister: false });\n  };\n\n  showRegister = (e) => {\n    this.setState({ showRegister: !this.state.showRegister, showLogin: false });\n  };\n\n  onChange = (e) => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  onSubmitLogin = (e) => {\n    e.preventDefault();\n    console.log(\"Login attempt\");\n    //get token from api\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    };\n    Axios.post(\n      \"https://wtg.aymerik-diebold.fr/login_check\",\n      {\n        username: this.state.email,\n        password: this.state.password,\n      },\n      { headers }\n    )\n      .then((res) => {\n        console.log(res);\n        this.props.connect(res.data.token);\n        this.setState({ showLogin: false });\n      })\n      .catch((err) => {\n        console.log(\"Login failed\");\n        this.setState({\n          registerSuccess: \"Email/password combination not found :(\",\n        });\n        throw err;\n      });\n  };\n\n  onSubmitRegister = (e) => {\n    e.preventDefault();\n    console.log(\"Register attempt\");\n    //todo: register to api\n    const headers = {\n      \"Content-Type\": \"application/json\",\n    };\n    if (this.state.password !== this.state.password2) {\n      this.setState({ registerMessage: \"Your passwords do not match :(\" });\n    } else if (\n      this.state.email === \"\" ||\n      this.state.password === \"\" ||\n      this.state.password2 === \"\"\n    ) {\n      this.setState({ registerMessage: \"Email and Password are required\" });\n    } else {\n      Axios.post(\n        \"https://wtg.aymerik-diebold.fr/register\",\n        {\n          email: this.state.email,\n          password: this.state.password,\n          firstname: this.state.firstname,\n          lastname: this.state.lastname,\n        },\n        { headers }\n      )\n        .then((res) => {\n          if (res.data.success === true) {\n            console.log(\"Registration successful!\");\n            this.setState({\n              registerSuccess:\n                \"Your account has been created! You can now log in\",\n              email: \"\",\n              password: \"\",\n              password2: \"\",\n              firstname: \"\",\n              lastname: \"\",\n              showRegister: false,\n              showLogin: true,\n            });\n          } else {\n            console.log(\"Registration failed :(\");\n            this.setState({\n              registerMessage: \"This email address is already registered\",\n            });\n          }\n        })\n        .catch((err) => {\n          console.log(\"error\");\n          throw err;\n        });\n    }\n  };\n\n  getStyleLogin = () => {\n    return {\n      display: this.state.showLogin ? \"block\" : \"none\",\n    };\n  };\n\n  getStyleRegister = () => {\n    return {\n      display: this.state.showRegister ? \"block\" : \"none\",\n    };\n  };\n\n  render() {\n    return (\n      <div class=\"topnav\">\n        {this.props.active == 0 ? (\n          <a class=\"active\" href=\"/WaysToGo/\">\n            WaysToGo\n          </a>\n        ) : (\n          <a href=\"/WaysToGo/\">WaysToGo</a>\n        )}\n        {this.props.active == 1 ? (\n          <a class=\"active\" href={\"?show=save\"}>\n            Ajouter un voyage\n          </a>\n        ) : (\n          <a href={\"?show=save\"}>Ajouter un voyage</a>\n        )}\n        {this.props.active == 2 ? (\n          <a class=\"active\" href=\"#contact\">\n            Contact\n          </a>\n        ) : (\n          <a href=\"#contact\">Contact</a>\n        )}\n        {this.props.active == 3 ? (\n          <a class=\"active\" href=\"#about\">\n            About\n          </a>\n        ) : (\n          <a href=\"#about\">About</a>\n        )}\n        {this.props.connected ? (\n          <a\n            class={this.props.active == 4 ? \"active\" : \"\"}\n            href=\"?show=profile\"\n          >\n            Profile\n          </a>\n        ) : (\n          <div>\n            <a class=\"connection\" onClick={this.showLogin}>\n              Login\n            </a>\n\n            <a class=\"connection\" onClick={this.showRegister}>\n              Register\n            </a>\n          </div>\n        )}\n        {this.props.active == 5 ? (\n          <a class=\"active\" href={\"?show=research\"}>\n            {\" \"}\n            Recherche{\" \"}\n          </a>\n        ) : (\n          <a href={\"?show=research\"}>Recherche</a>\n        )}\n\n        <div id=\"login\" style={this.getStyleLogin()}>\n          <p>{this.state.registerSuccess}</p>\n          <p>Email</p>\n          <input\n            type=\"text\"\n            name=\"email\"\n            onChange={this.onChange}\n            value={this.state.email}\n            placeholder=\"john.doe@mail.com\"\n          />\n\n          <p>Password</p>\n          <input\n            type=\"password\"\n            name=\"password\"\n            onChange={this.onChange}\n            value={this.state.password}\n          />\n\n          <input\n            type=\"submit\"\n            name=\"submit\"\n            value=\"Login\"\n            onClick={this.onSubmitLogin}\n          />\n        </div>\n\n        <div id=\"register\" style={this.getStyleRegister()}>\n          <p>{this.state.registerMessage}</p>\n          <p>Email</p>\n          <input\n            type=\"text\"\n            name=\"email\"\n            onChange={this.onChange}\n            value={this.state.email}\n            placeholder=\"ex. john.doe@mail.com\"\n          />\n\n          <p>Firstname</p>\n          <input\n            type=\"text\"\n            name=\"firstname\"\n            onChange={this.onChange}\n            value={this.state.firstname}\n            placeholder=\"ex. John\"\n          />\n\n          <p>Lastname</p>\n          <input\n            type=\"text\"\n            name=\"lastname\"\n            onChange={this.onChange}\n            value={this.state.lastname}\n            placeholder=\"ex. Doe\"\n          />\n\n          <p>Password</p>\n          <input\n            type=\"password\"\n            name=\"password\"\n            onChange={this.onChange}\n            value={this.state.password}\n          />\n\n          <p>Confirm Password</p>\n          <input\n            type=\"password\"\n            name=\"password2\"\n            onChange={this.onChange}\n            value={this.state.password2}\n          />\n\n          <input\n            type=\"submit\"\n            name=\"submit\"\n            value=\"Login\"\n            onClick={this.onSubmitRegister}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\n// show the head of the trip\r\n/* Need a parameter param like :\r\n * param = {\r\n * title = string\r\n * ?startdate = string in a good date format (aaaa-mm-dd)\r\n * vegan = bool\r\n * ecological = bool\r\n * author {\r\n *\t\tfirstName = string\r\n *\t\tlastName = string\r\n *\t}\r\n *\tstages = list of stage\r\n * }\r\n */\r\nexport class EnteteVoyage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = {\r\n      param: props.param,\r\n    };\r\n\r\n    this.monthNames = [\r\n      \"January\",\r\n      \"February\",\r\n      \"March\",\r\n      \"April\",\r\n      \"May\",\r\n      \"June\",\r\n      \"July\",\r\n      \"August\",\r\n      \"September\",\r\n      \"October\",\r\n      \"November\",\r\n      \"December\",\r\n    ];\r\n  }\r\n\r\n  /* TODO :\r\n   * qui retourne le nombre de photos\r\n   * qui retourne le nombre de pays ou passe le voyage\r\n   */\r\n\r\n  getStageNumber(etapes) {\r\n    return etapes.length;\r\n  }\r\n\r\n  // retourne le mois de debut\r\n  getDateDebut(etapes) {\r\n    if (etapes.length > 0) {\r\n      var d = new Date(etapes[0].departure);\r\n      return this.monthNames[d.getMonth()];\r\n    } else return null;\r\n  }\r\n\r\n  // retourne le mois de fin\r\n  getDateFin(etapes) {\r\n    if (etapes.length > 0) {\r\n      var d = new Date(etapes[etapes.length - 1].arrival);\r\n      return this.monthNames[d.getMonth()];\r\n    } else return 0;\r\n  }\r\n\r\n  // retourne le nombre de jours\r\n  getDureeVoyage1(etapes) {\r\n    if (etapes.length > 0) {\r\n      var d =\r\n        new Date(etapes[etapes.length - 1].arrival) -\r\n        new Date(etapes[0].departure);\r\n      const diffDays = Math.ceil(d / (1000 * 60 * 60 * 24)) + 1;\r\n      return diffDays;\r\n    } else return 0;\r\n  }\r\n\r\n  getDureeVoyage2(date1, date2) {\r\n    var d = new Date(date2) - new Date(date1);\r\n    const diffDays = Math.ceil(d / (1000 * 60 * 60 * 24)) + 1;\r\n    return diffDays;\r\n  }\r\n\r\n  // renvoi la date a afficher (mois - mois)\r\n  getMonthsDate1(etapes) {\r\n    if (etapes.length > 0) {\r\n      var d = this.getDateDebut(etapes);\r\n      var a = this.getDateFin(etapes);\r\n      if (d !== a)\r\n        return this.getDateDebut(etapes) + \" - \" + this.getDateFin(etapes);\r\n      else return d;\r\n    } else return \"\";\r\n  }\r\n\r\n  getMonthsDate2(date1, date2) {\r\n    var d = new Date(date1);\r\n    var a = new Date(date2);\r\n    if (d.getMonth() !== a.getMonth())\r\n      return (\r\n        this.monthNames[d.getMonth()] + \" - \" + this.monthNames[a.getMonth()]\r\n      );\r\n    else return this.monthNames[d.getMonth()];\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div ref={this.state.param.refHead} id=\"head\">\r\n        <h2>{this.state.param.title}</h2>\r\n        <h5>\r\n          {this.state.param.startdate\r\n            ? \"\"\r\n            : this.getMonthsDate1(this.state.param.stages)}\r\n        </h5>\r\n        <p class=\"ladescription\">{'\"' + this.state.param.description + '\"'}</p>\r\n        <p>\r\n          {this.state.param.vegan\r\n            ? \"Ce voyage est vegan\"\r\n            : \"Ce voyage est signalé comme non-vegan\"}\r\n        </p>\r\n        <p>\r\n          {this.state.param.ecological\r\n            ? \"Ce voyage est ecologique\"\r\n            : \"Ce voyage est signalé comme non-ecologique\"}\r\n        </p>\r\n        <p>\r\n          auteur :{\" \"}\r\n          {this.state.param.author.firstName +\r\n            \" \" +\r\n            this.state.param.author.lastName}\r\n        </p>\r\n        <p>\r\n          Durée du voyage :{\" \"}\r\n          {this.state.param.startdate\r\n            ? this.getDureeVoyage2(\r\n                this.state.param.startdate,\r\n                this.state.param.enddate\r\n              )\r\n            : this.getDureeVoyage1(this.state.param.stages)}{\" \"}\r\n          jours\r\n        </p>\r\n        {this.state.param.edit ? (\r\n          <div>\r\n            <label for=\"files2\" style={{ border: \"2px solid black\" }}>\r\n              Change cover image\r\n            </label>\r\n            <input\r\n              id=\"files2\"\r\n              style={{ visibility: \"hidden\" }}\r\n              ref={this.state.param.refHead}\r\n              type=\"file\"\r\n              accept=\"image/*\"\r\n              onChange={this.state.param.changeCover}\r\n            />\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\n// render a step\r\nexport class EtapeVoyage extends React.Component {\r\n  render() {\r\n    return (\r\n      <div>\r\n        <div class=\"etape\">\r\n          <p class=\"nomEtape\">{this.props.etape.description}</p>\r\n\r\n          <p class=\"villedate_etape\">\r\n            {this.props.etape.city + \" • \" + new Date(this.props.etape.arrival)}\r\n          </p>\r\n\r\n          {this.props.etape.photos.map((photo, i) => (\r\n            <div>\r\n              <img\r\n                key={i}\r\n                src={photo.path}\r\n                alt={photo.title}\r\n                height=\"150\"\r\n                width=\"200\"\r\n              ></img>\r\n\r\n              <p key={i}>{photo.description}</p>\r\n            </div>\r\n          ))}\r\n        </div>\r\n\r\n        {this.props.etape.departureTransport ? (\r\n          <div class=\"transition_etape\">\r\n            <p class=\"transitionTexte\">\r\n              • Moyen de transport : {this.props.etape.departureTransport.type}\r\n            </p>\r\n          </div>\r\n        ) : (\r\n          \"\"\r\n        )}\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nclass ShowVoyage extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.loadDoc(this); // on recupere le voyage souhaite avec une requete ajax\r\n\r\n    this.state = {\r\n      id: props.id,\r\n      titre: null,\r\n      toRender: <h1>Chargement en cours...</h1>,\r\n    };\r\n  }\r\n\r\n  loadDoc(parentVoyage) {\r\n    var xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = function () {\r\n      if (this.readyState === 4 && this.status === 200) {\r\n        const param = JSON.parse(this.responseText);\r\n        console.log(\"Voyage : \" + param);\r\n        parentVoyage.setState({\r\n          toRender: (\r\n            <div>\r\n              <NavigationBar\r\n                connected={parentVoyage.props.connected}\r\n                connect={parentVoyage.props.connect}\r\n              />\r\n              <div id=\"carteSide\">\r\n                <Map id=\"ShowVoyageMap\" center={[40.0, 3.0]} zoom={1}>\r\n                  <TileLayer\r\n                    attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n                    url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n                  />\r\n\r\n                  {param.stages.map((etape) => (\r\n                    <Marker position={[etape.lng, etape.lat]}>\r\n                      <Popup>\r\n                        <h1>{etape.description}</h1>\r\n                      </Popup>\r\n                    </Marker>\r\n                  ))}\r\n                </Map>\r\n              </div>\r\n\r\n              <div id=\"information\">\r\n                <EnteteVoyage param={param} />\r\n\r\n                <div id=\"etapes\">\r\n                  {console.log(param)}\r\n                  {param.stages.map((etape) => (\r\n                    <EtapeVoyage etape={etape} photos={etape.photos} />\r\n                  ))}\r\n                </div>\r\n              </div>\r\n            </div>\r\n          ),\r\n        });\r\n      }\r\n    };\r\n    xhttp.open(\r\n      \"GET\",\r\n      \"https://wtg.aymerik-diebold.fr/api/trips/\" + parentVoyage.props.id,\r\n      true\r\n    );\r\n    xhttp.send();\r\n  }\r\n\r\n  render() {\r\n    let content = (\r\n      <div>\r\n        <div>{this.state.toRender}</div>\r\n      </div>\r\n    );\r\n    return content;\r\n  }\r\n}\r\n\r\nexport default ShowVoyage;\r\n","import React, { Component } from \"react\";\r\nimport \"./App.css\";\r\nimport { EnteteVoyage } from \"./ShowVoyage\";\r\nimport ReactDOM from \"react-dom\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\n\r\n// Gere l'ajout d'image et l'affichage. https://stackoverflow.com/questions/38049966/get-image-preview-before-uploading-in-react\r\nclass Upload extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\t\tthis.state = {\r\n\t\t\tfiles: props.files, // contient l'ensemble des images. Vide initialement. On passe la référence\r\n\t\t\tfilesToShow: []\r\n\t\t}\r\n\r\n\t\tthis.handleChange = this.handleChange.bind(this);\r\n\t}\r\n\r\n\t// when we get images\r\n\thandleChange(event) {\r\n\t\tthis.props.changeButtonState(true);\r\n\t\tthis.setState({\r\n\t\t\tfilesToShow: [...this.state.filesToShow, ...event.target.files] // ajout des nouvelles images a ceux deja existantes\r\n\t\t});\r\n\r\n\t\t//console.log([...event.target.files]);\r\n\t\tvar parentUpload = this;\r\n\t\tvar totalEndUpload = 0;\r\n\t\tvar images = event.target.files;\r\n\t\t[...event.target.files].map(function (file) {\r\n\t\t\t// senf img to imgbb for saving\r\n\t\t\t//console.log('send...');\r\n\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\tvar img = file;\r\n\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\t\t//console.log(\"upload finit\");\r\n\r\n\r\n\r\n\r\n\t\t\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\t\t\t\tconsole.log(\"Upload photo in API success\");\r\n\r\n\t\t\t\t\t\t\t//parentUpload.state.urllist.push(JSON.parse(this.responseText).id); // ajout des nouvelles url d'images a ceux deja existantes\r\n\t\t\t\t\t\t\tparentUpload.props.addImgFile({ image: img, idAPI: JSON.parse(this.responseText).id });\r\n\t\t\t\t\t\t\t//parentUpload.setState({\r\n\t\t\t\t\t\t\t//\tfiles: parentUpload.props.files.concat({ image: img, idAPI: JSON.parse(this.responseText).id }) // ajout des nouvelles images a ceux deja existantes\r\n\t\t\t\t\t\t\t//});\r\n\t\t\t\t\t\t\ttotalEndUpload += 1;\r\n\t\t\t\t\t\t\t//console.log(parentUpload.state.files);\r\n\t\t\t\t\t\t\tif (totalEndUpload == images.length) {\r\n\t\t\t\t\t\t\t\tparentUpload.props.changeButtonState(false);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t//parentUpload.state.files = [];\r\n\t\t\t\t\t\t\t//parentUpload.state.urllist = [];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t};\r\n\t\t\t\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/photos\", true);\r\n\t\t\t\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentUpload.props.token);\r\n\t\t\t\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\t\txhttp.send(JSON.stringify({\r\n\t\t\t\t\t\tpath: JSON.parse(this.responseText).data.link,\r\n\t\t\t\t\t\t//stage: parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\t\tisCover: false\r\n\t\t\t\t\t}));\r\n\r\n\r\n\r\n\r\n\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\r\n\t\t\txhttp.open(\"POST\", \"https://api.imgur.com/3/image\", true);\r\n\t\t\txhttp.setRequestHeader('Authorization', 'Client-ID 140f137c33f88ac');\r\n\r\n\t\t\tvar data = new FormData();\r\n\t\t\tdata.append('image', file);\r\n\r\n\t\t\txhttp.send(data);\r\n\t\t})\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<div ref={this.props.imgcontainer}>\r\n\t\t\t\t\t{/* Display all selected images. */}\r\n\t\t\t\t\t{this.state.filesToShow && [...this.state.filesToShow].map((file) => (\r\n\t\t\t\t\t\t<img width=\"200px\" height=\"200px\" src={URL.createObjectURL(file)} alt=\"Image\" />\r\n\t\t\t\t\t))}\r\n\t\t\t\t</div>\r\n\t\t\t\t<input ref={this.props.refInput} type=\"file\" accept=\"image/*\" multiple onChange={this.handleChange} />\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n// Gere la recherche des villes/adresses dans la popup add new Voyage\r\nclass ResearchBarCity extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props)\r\n\r\n\t\tthis.researchRef = React.createRef();\r\n\t}\r\n\r\n\t// Autocomplete for form\r\n\thinter(event) {\r\n\t\t// save change\r\n\t\tthis.props.getdataback(0, 0);\r\n\r\n\t\t// minimum number of characters before we start to generate suggestions\r\n\t\tif (event.target.value.length < 2) return;\r\n\t\telse {\r\n\r\n\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\tvar parentV = this;\r\n\r\n\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\r\n\t\t\t\t\t// We're expecting a json response so we convert it to an object\r\n\t\t\t\t\tvar response = JSON.parse(this.responseText);\r\n\r\n\t\t\t\t\t// clear any previously loaded options in the datalist\r\n\t\t\t\t\tparentV.researchRef.current.innerHTML = \"\";\r\n\r\n\t\t\t\t\tresponse.forEach(function (item) {\r\n\t\t\t\t\t\tvar option = document.createElement('div');\r\n\r\n\t\t\t\t\t\toption.innerText = item.display_name;\r\n\t\t\t\t\t\t// add onclick event : we fill the input\r\n\t\t\t\t\t\toption.onclick = function () {\r\n\t\t\t\t\t\t\tparentV.props.refCity.current.value = this.innerText;\r\n\t\t\t\t\t\t\tparentV.props.getdataback(parseFloat(item.lat), parseFloat(item.lon));\r\n\t\t\t\t\t\t\tparentV.researchRef.current.innerHTML = \"\";\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t\t// attach the div to the list div\r\n\t\t\t\t\t\tparentV.researchRef.current.appendChild(option);\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\t// we use nominatim from openstreetmap to resolve adress\r\n\t\t\txhttp.open(\"GET\", \"https://nominatim.openstreetmap.org/?addressdetails=1&format=json&limit=3&q=\" + this.props.refCity.current.value, true);\r\n\t\t\txhttp.send()\r\n\t\t}\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<input ref={this.props.refCity} type=\"text\" name=\"lville\" placeholder=\"Place..\" id=\"name_input\" onKeyPress={this.hinter.bind(this)} />\r\n\t\t\t\t<div ref={this.researchRef} id=\"huge_list\"></div>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\n/* Parametre : \r\n * arguments {\r\n *\tname {\r\n *\t\tvalue\r\n *\t},\r\n *\tlocation {\r\n *\t\tvalue\r\n *\t},\r\n *\tdate {\r\n *\t\tvalue\r\n *\t},\r\n *\tstory {\r\n *\t\tvalue\r\n *\t},\r\n *\tfiles {\r\n *\t\tvalue\r\n *\t},\r\n * }\r\n */\r\nclass UneEtape extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.refLocation = React.createRef();\r\n\t\tthis.refName = React.createRef();\r\n\t\tthis.refDate = React.createRef();\r\n\t\tthis.refDescription = React.createRef();\r\n\t\tthis.refDateDepart = React.createRef();\r\n\t\tthis.refDepartureTransport = React.createRef();\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"etapevoyage\">\r\n\t\t\t\t<button type=\"button\" onClick={() => this.props.editStepLink(this.refName, this.refLocation, this.refDate, this.refDateDepart, this.refDepartureTransport, this.refDescription)}>Edit step</button>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Location : </label>\r\n\t\t\t\t<label ref={this.refLocation}>{this.props.arguments.location}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Step name : </label>\r\n\t\t\t\t<label ref={this.refName}>{this.props.arguments.name}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Arrival date : </label>\r\n\t\t\t\t<label ref={this.refDate}>{this.props.arguments.date}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Departure date : </label>\r\n\t\t\t\t<label ref={this.refDateDepart}>{this.props.arguments.dateDepart}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Moyen de transport : </label>\r\n\t\t\t\t<label ref={this.refDepartureTransport}>{this.props.arguments.departureTransport}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t<label>Your story : </label>\r\n\t\t\t\t<label ref={this.refDescription}>{this.props.arguments.description}</label>\r\n\t\t\t\t<br></br>\r\n\r\n\t\t\t\t{this.props.arguments.files && [...this.props.arguments.files].map((file, i) => (\r\n\t\t\t\t\t<img key={i} width=\"200px\" height=\"200px\" src={URL.createObjectURL(file.image)} alt=\"Image\" />\r\n\t\t\t\t))}\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n// seconde vue de la création de voyage : permet d'ajouter des etapes\r\nclass CreationVoyageAjoutEtapes extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\tthis.state = {\r\n\t\t\tname: props.name,\r\n\t\t\tdescription: props.description,\r\n\t\t\tvegan: props.vegan,\r\n\t\t\tecolo: props.ecolo,\r\n\t\t\tvoyageId: props.voyageId,\r\n\t\t\teditStepBool: false,\r\n\r\n\t\t\tfiles: []\r\n\t\t};\r\n\r\n\t\tthis.setTextInputRef = React.createRef();\r\n\r\n\t\tthis.inputphotoToReset = React.createRef();\r\n\t\tthis.imgcontainer = React.createRef();\r\n\r\n\t\tthis.toggleModal = this.toggleModal.bind(this)\r\n\t\tthis.getLatLnt = this.getLatLnt.bind(this);\r\n\t\tthis.editStep = this.editStep.bind(this);\r\n\t\tthis.changeEnteteBackground = this.changeEnteteBackground.bind(this);\r\n\r\n\t\tthis.newCity = React.createRef();\r\n\t\tthis.newName = React.createRef();\r\n\t\tthis.newDate = React.createRef();\r\n\t\tthis.newDateDepart = React.createRef();\r\n\t\tthis.newDepartureTransport = React.createRef();\r\n\t\tthis.newDescription = React.createRef();\r\n\r\n\t\tthis.newLat = React.createRef();\r\n\t\tthis.newLnt = React.createRef();\r\n\t\tthis.boutonOK = React.createRef();\r\n\r\n\t\tthis.refHead = React.createRef();\r\n\t}\r\n\r\n\teditStep(refName, refLocation, refDate, refDateDepart, refDepartureTransport, refDescription) {\r\n\t\t//console.log(\"EDIT !\");\r\n\t\t// reset values of components in the modal\r\n\t\tthis.newDescription.current.value = this.state.stepDescription;\r\n\t\tthis.newName.current.value = this.state.stepName;\r\n\t\tthis.newDate.current.value = this.state.stepDate;\r\n\t\tthis.newDateDepart.current.value = this.state.stepDateDepart;\r\n\t\tthis.newDepartureTransport.current.value = this.state.stepDepartureTransport;\r\n\t\tthis.newCity.current.value = this.state.stepCity;\r\n\r\n\r\n\t\tthis.setState({\r\n\t\t\teditStepBool: true,\r\n\t\t\trefLocation: refLocation,\r\n\t\t\tstepDate: refDate,\r\n\t\t\tstepDateDepart: refDateDepart,\r\n\t\t\tstepDepartureTransport: refDepartureTransport,\r\n\t\t\trefDescription: refDescription,\r\n\t\t\trefName: refName,\r\n\t\t})\r\n\r\n\t\t//console.log(this.state.refLocation);\r\n\r\n\t\tdocument.querySelector(\".modal\").classList.toggle(\"show-modal\");\r\n\t}\r\n\r\n\taddEtapeVoyage() {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentVoyage = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\t//console.log(this.responseText);\r\n\t\t\tvar res = this.responseText;\r\n\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\tif (parentVoyage.state.editStepBool == false) {\r\n\t\t\t\t\tReactDOM.render(<UneEtape arguments={\r\n\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\"location\": parentVoyage.newCity.current.value,\r\n\t\t\t\t\t\t\t\"files\": parentVoyage.state.files,\r\n\t\t\t\t\t\t\t\"description\": parentVoyage.newDescription.current.value,\r\n\t\t\t\t\t\t\t\"date\": parentVoyage.newDate.current.value,\r\n\t\t\t\t\t\t\t\"dateDepart\": parentVoyage.newDateDepart.current.value,\r\n\t\t\t\t\t\t\t\"departureTransport\": parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\t\t\t\"name\": parentVoyage.newName.current.value\r\n\t\t\t\t\t\t}} editStepLink={parentVoyage.editStep} />, parentVoyage.setTextInputRef.current.appendChild(document.createElement('div')))\r\n\t\t\t\t} else {\r\n\t\t\t\t\tparentVoyage.state.refLocation.current.textContent = parentVoyage.newCity.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDate.current.textContent = parentVoyage.newDate.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDateDepart.current.textContent = parentVoyage.newDateDepart.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDepartureTransport.current.textContent = parentVoyage.newDepartureTransport.current.value;\r\n\t\t\t\t\tparentVoyage.state.refDescription.current.textContent = parentVoyage.newDescription.current.value;\r\n\t\t\t\t\tparentVoyage.state.refName.current.textContent = parentVoyage.newName.current.value;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// maintenant on envoi le transport\r\n\t\t\t\tvar xhttp = new XMLHttpRequest();\r\n\t\t\t\txhttp.onreadystatechange = function () {\r\n\t\t\t\t\t//console.log(this.responseText);\r\n\t\t\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\t\t\t//console.log(\"Upload transport etape success\");\r\n\t\t\t\t\t\tparentVoyage.state.editStepBool = false;\r\n\t\t\t\t\t\tparentVoyage.toggleModal();\r\n\t\t\t\t\t}\r\n\t\t\t\t};\r\n\t\t\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/transports\", true);\r\n\t\t\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentVoyage.props.token);\r\n\t\t\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\t\txhttp.send(JSON.stringify({\r\n\t\t\t\t\tstageFrom: \"/api/stages/\" + JSON.parse(res).id,\r\n\t\t\t\t\ttype: parentVoyage.newDepartureTransport.current.value,\r\n\t\t\t\t\tdistance: 0\r\n\t\t\t\t}));\r\n\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\tthis.setState({\r\n\t\t\tstepDescription: this.newDescription.current.value,\r\n\t\t\tstepName: this.newName.current.value,\r\n\t\t\tstepDate: this.newDate.current.value,\r\n\t\t\tstepDateDepart: this.newDateDepart.current.value,\r\n\t\t\tstepDepartureTransport: this.newDepartureTransport.current.value,\r\n\t\t\tstepId: this.state.voyageId,\r\n\t\t\tstepLat: this.state.newLat,\r\n\t\t\tstepLnt: this.state.newLnt,\r\n\t\t\tstepCity: this.newCity.current.value,\r\n\t\t\tstepFiles: this.state.files\r\n\t\t})\r\n\r\n\t\tvar listformat = [];\r\n\t\t//console.log(this.state.files);\r\n\t\tthis.state.files.forEach(function (item) {\r\n\t\t\tlistformat.push(\"/api/photos/\" + item.idAPI);\r\n\t\t});\r\n\t\t//console.log(listformat);\r\n\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/stages\", true);\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + this.props.token);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\tcity: this.newCity.current.value,\r\n\t\t\tcountry: \"rien\",\r\n\t\t\tmark: 0,\r\n\t\t\tdescription: this.newDescription.current.value,\r\n\t\t\tarrival: this.newDate.current.value,\r\n\t\t\tdeparture: this.newDateDepart.current.value,\r\n\t\t\t//departureTransport: this.newDepartureTransport.current.value,\r\n\t\t\ttrip: \"/api/trips/\" + this.state.voyageId,\r\n\t\t\tlng: this.state.newLat,\r\n\t\t\tlat: this.state.newLnt,\r\n\t\t\ttitle: this.newName.current.value,\r\n\t\t\tphotos: listformat\r\n\t\t}));\r\n\t}\r\n\r\n\ttoggleModal() {\r\n\t\tdocument.querySelector(\".modal\").classList.toggle(\"show-modal\");\r\n\r\n\t\t// reset values of components in the modal\r\n\t\tthis.newDescription.current.value = \"\";\r\n\t\tthis.newName.current.value = \"\";\r\n\t\tthis.newDate.current.value = \"\";\r\n\t\tthis.newDateDepart.current.value = \"\";\r\n\t\tthis.newDepartureTransport.current.value = \"\";\r\n\t\tthis.newCity.current.value = \"\";\r\n\t\tthis.inputphotoToReset.current.value = \"\";\r\n\t\tthis.imgcontainer.current.textContent = \"\"; // textContent is faster than innerHTML\r\n\r\n\t\tthis.setState({\r\n\t\t\tfiles: []\r\n\t\t})\r\n\t}\r\n\r\n\tchangeButtonState(etat) {\r\n\t\tthis.boutonOK.current.disabled = etat;\r\n\t\tif (etat == true)\r\n\t\t\tthis.boutonOK.current.textContent = \"Image upload in progress...\"\r\n\t\telse\r\n\t\t\tthis.boutonOK.current.textContent = \"Add step\"\r\n\t\t//console.log(\"change etat avec : \", etat);\r\n\t}\r\n\r\n\tgetLatLnt(lat, lnt) {\r\n\t\tthis.setState({\r\n\t\t\tnewLnt: lnt,\r\n\t\t\tnewLat: lat\r\n\t\t})\r\n\t}\r\n\r\n\tchangeEnteteBackground(event) {\r\n\t\tthis.refHead.current.style.backgroundImage = \"linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('\" + URL.createObjectURL(event.target.files[0]) + \"')\";\r\n\t}\r\n\r\n\taddImgFile(img) {\r\n\t\tthis.setState({\r\n\t\t\tfiles: this.state.files.concat(img) // ajout des nouvelles images a ceux deja existantes\r\n\t\t});\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div id=\"information\">\r\n\t\t\t\t<EnteteVoyage param={{ changeCover: this.changeEnteteBackground, edit: true, refHead: this.refHead, title: this.state.name, description: this.state.description, vegan: this.state.vegan, ecolo: this.state.ecolo, stages: [], author: { firstName: \"Nicolas\", lastName: \"Dupond\" } }} />\r\n\r\n\t\t\t\t<div ref={this.setTextInputRef}></div>\r\n\r\n\t\t\t\t<div class=\"modal\">\r\n\t\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t\t<span class=\"close-button\" onClick={this.toggleModal}>×</span>\r\n\t\t\t\t\t\t{/*https://community.algolia.com/places/documentation.html#getting-started */}\r\n\t\t\t\t\t\t<label for=\"lville\">Location</label>\r\n\t\t\t\t\t\t<ResearchBarCity refCity={this.newCity} getdataback={this.getLatLnt} newLat={this.newLat} newLnt={this.newLnt} />\r\n\r\n\t\t\t\t\t\t<label for=\"nometape\">Step name</label>\r\n\t\t\t\t\t\t<input ref={this.newName} type=\"text\" id=\"nometape\" name=\"nometape\" placeholder=\"ex. Promenade dans Paris\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"larrivee\">Arrival date</label>\r\n\t\t\t\t\t\t<input ref={this.newDate} type=\"text\" id=\"larrivee\" name=\"larrivee\" placeholder=\"Arrivée..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ldepart\">Departure date</label>\r\n\t\t\t\t\t\t<input ref={this.newDateDepart} type=\"text\" id=\"ldepart\" name=\"ldepart\" placeholder=\"Arrivée..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ltransport\">Moyen de transport entre étapes</label>\r\n\t\t\t\t\t\t<input ref={this.newDepartureTransport} type=\"text\" id=\"ltransport\" name=\"ltransport\" placeholder=\"Moyen transport..\"></input>\r\n\r\n\t\t\t\t\t\t<label for=\"ldescription\">Your story</label>\r\n\t\t\t\t\t\t<textarea ref={this.newDescription} id=\"ldescription\" name=\"ldescription\" placeholder=\"Ce que vous voulez...\"></textarea>\r\n\r\n\t\t\t\t\t\t<Upload token={this.props.token} addImgFile={this.addImgFile.bind(this)} files={this.state.files} changeButtonState={this.changeButtonState.bind(this)} imgcontainer={this.imgcontainer} refInput={this.inputphotoToReset} />\r\n\r\n\t\t\t\t\t\t<button type=\"button\" ref={this.boutonOK} onClick={this.addEtapeVoyage.bind(this)}>Add step</button>\r\n\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\t\t\t\t<button class=\"trigger\" onClick={this.toggleModal}>Add a step</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nclass ModalChargement extends React.Component {\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div class=\"modal_chargement\">\r\n\t\t\t\t<div class=\"modal-content\">\r\n\t\t\t\t\t<p>Chargement</p>\r\n\r\n\t\t\t\t</div>\r\n\t\t\t</div>\r\n\t\t)\r\n\t}\r\n}\r\n\r\n\r\nclass CreationVoyage extends React.Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.description = React.createRef();\r\n\t\tthis.name = React.createRef();\r\n\t\tthis.vegan = React.createRef();\r\n\t\tthis.ecolo = React.createRef();\r\n\t}\r\n\r\n\taddVoyageCheck() {\r\n\t\tif (this.description.current.validity.valid && this.name.current.validity.valid) {\r\n\t\t\tthis.props.addMyVoyage(this.name.current.value, this.description.current.value, this.vegan.current.checked, this.ecolo.current.checked)\r\n\t\t} else alert(\"Please complete the Details section\")\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div className=\"formulaire\">\r\n\t\t\t\t<h3>New trip</h3>\r\n\r\n\t\t\t\t<div className=\"partie\">\r\n\t\t\t\t\t<h4>Détails</h4>\r\n\t\t\t\t\t<div className=\"partiedetails\">\r\n\t\t\t\t\t\t<p className=\"partieLabel\">Trip name:</p>\r\n\t\t\t\t\t\t<input required type=\"text\" ref={this.name} id=\"fname\" name=\"firstname\" placeholder=\"ex. A grand tour of France\"></input>\r\n\r\n\t\t\t\t\t\t<p className=\"partieLabel\">Trip summary:</p>\r\n\t\t\t\t\t\t<textarea required ref={this.description} id=\"lname\" name=\"lastname\" placeholder=\"ex. A bucolic journey through the French countryside: old relics and local specialities\"></textarea>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t<div className=\"partie\">\r\n\t\t\t\t\t<h4>Parameters</h4>\r\n\t\t\t\t\t<div className=\"partiedetails\">\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input ref={this.vegan} type=\"checkbox\" id=\"voyagevegan\" name=\"voyagevegan\" value=\"newsletter\"></input>\r\n\t\t\t\t\t\t\t<label htmlFor=\"voyagevegan\">Is this trip vegan?</label>\r\n\t\t\t\t\t\t</div>\r\n\r\n\t\t\t\t\t\t<div>\r\n\t\t\t\t\t\t\t<input ref={this.ecolo} type=\"checkbox\" id=\"voyageecolo\" name=\"voyageecolo\" value=\"newsletter\"></input>\r\n\t\t\t\t\t\t\t<label htmlFor=\"voyageecolo\">Is this trip environmentally friendly?</label>\r\n\t\t\t\t\t\t</div>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t</div>\r\n\r\n\r\n\t\t\t\t<button type=\"button\" className=\"boutonsend\" onClick={this.addVoyageCheck.bind(this)}>Add my trip</button>\r\n\t\t\t</div>\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default class AddVoyage extends Component {\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\r\n\t\tthis.state = {\r\n\t\t\ttoken: props.token,\r\n\t\t\tstartNewVoyage: true,\r\n\t\t\tchargement: false,\r\n\r\n\t\t\tname: \"\",\r\n\t\t\tdescription: \"\",\r\n\t\t\tvegan: false,\r\n\t\t\tecolo: false\r\n\t\t};\r\n\r\n\t\tthis.renouvelerToken = this.renouvelerToken.bind(this);\r\n\t\tthis.addMyVoyage = this.addMyVoyage.bind(this)\r\n\t}\r\n\r\n\trenouvelerToken() {\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentToken = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\tif (this.readyState === 4 && this.status === 200) {\r\n\t\t\t\tparentToken.state.token = JSON.parse(this.responseText).token;\r\n\t\t\t\tparentToken.props.updateToken(parentToken.state.token);\r\n\t\t\t\tparentToken.addMyVoyage(parentToken.state.name, parentToken.state.description, parentToken.state.vegan, parentToken.state.ecolo);\r\n\t\t\t}\r\n\t\t};\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/login_check\", true);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\t\"username\": \"mailleon@gmail.com\",\r\n\t\t\t\"password\": \"monmdp111A!\"\r\n\t\t}));\r\n\t}\r\n\r\n\taddMyVoyage(newname, newdescription, newvegan, newecolo) {\r\n\t\t//console.log(newname, newdescription, newvegan, newecolo);\r\n\t\tthis.setState({\r\n\t\t\tname: newname,\r\n\t\t\tdescription: newdescription,\r\n\t\t\tvegan: newvegan,\r\n\t\t\tecolo: newecolo,\r\n\t\t\tchargement: true\r\n\t\t})\r\n\t\tvar xhttp = new XMLHttpRequest();\r\n\t\tvar parentVoyage = this;\r\n\t\txhttp.onreadystatechange = function () {\r\n\t\t\t//console.log(this.responseText);\r\n\t\t\tif (this.readyState === 4 && this.status === 201) {\r\n\t\t\t\tvar res = JSON.parse(this.responseText);\r\n\t\t\t\tparentVoyage.setState({\r\n\t\t\t\t\tchargement: false,\r\n\t\t\t\t\tstartNewVoyage: false,\r\n\t\t\t\t\tvoyageId: res.id\r\n\t\t\t\t})\r\n\t\t\t} else if (this.readyState === 4 && this.status === 401) {\r\n\t\t\t\tconsole.log(\"Token non valide, renouvellement...\");\r\n\t\t\t\tparentVoyage.renouvelerToken();\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t\txhttp.open(\"POST\", \"https://wtg.aymerik-diebold.fr/api/trips\", true);\r\n\t\txhttp.setRequestHeader('Authorization', 'Bearer ' + parentVoyage.state.token);\r\n\t\txhttp.setRequestHeader('Content-Type', 'application/json');\r\n\t\txhttp.send(JSON.stringify({\r\n\t\t\t\"title\": newname,\r\n\t\t\t\"description\": newdescription,\r\n\t\t\t\"vegan\": newvegan,\r\n\t\t\t\"ecological\": newecolo,\r\n\t\t\t\"author\": \"api/users/10\",\r\n\t\t\t\"keywords\": \"paris plage\",\r\n\t\t}));\r\n\r\n\t}\r\n\r\n\trender() {\r\n\t\treturn (\r\n\t\t\t<div>\r\n\t\t\t\t<NavigationBar active={1} token={this.props.token} connected={this.props.connected} connect={this.props.connect} />\r\n\r\n\t\t\t\t{this.state.startNewVoyage ?\r\n\t\t\t\t\t!this.state.chargement ?\r\n\t\t\t\t\t\t<CreationVoyage token={this.state.token} addMyVoyage={this.addMyVoyage.bind(this)} />\r\n\t\t\t\t\t\t:\r\n\t\t\t\t\t\t<ModalChargement />\r\n\t\t\t\t\t:\r\n\t\t\t\t\t<CreationVoyageAjoutEtapes token={this.state.token} voyageId={this.state.voyageId} name={this.state.name} vegan={this.state.vegan} ecolo={this.state.ecolo} description={this.state.description} />\r\n\t\t\t\t}\r\n\t\t\t</div>\r\n\t\t);\r\n\r\n\t}\r\n}\r\n","import React, { Component } from \"react\";\r\nimport { Map, TileLayer, Marker, Popup } from \"react-leaflet\";\r\nimport \"./App.css\";\r\nimport NavigationBar from \"./NavigationBar\";\r\n\r\nexport default class ShowCarte extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      voyages: [],\r\n\r\n      lat: 48.856614, // centr� sur Paris\r\n      lng: 2.3522219,\r\n      zoom: 2,\r\n    };\r\n\r\n    this.loadTrips(this);\r\n  }\r\n\r\n  loadTrips(parentThis) {\r\n    //let liste = []\r\n    var xhttp = new XMLHttpRequest();\r\n    xhttp.onreadystatechange = function () {\r\n      if (this.readyState === 4 && this.status === 200) {\r\n        parentThis.setState({\r\n          voyages: JSON.parse(this.response)[\"hydra:member\"], // stock all trips\r\n        });\r\n        console.log(JSON.parse(this.response));\r\n      }\r\n    };\r\n    xhttp.open(\"GET\", \"https://wtg.aymerik-diebold.fr/api/trips\", true);\r\n    xhttp.send();\r\n\r\n    /*for (let i = 333; i < 335; i++) {\r\n\t\t\t// delete all\r\n\t\t\tvar xhttp2 = new XMLHttpRequest();\r\n\t\t\txhttp2.onreadystatechange = function () {\r\n\t\t\t\tconsole.log(this.response);\r\n\t\t\t};\r\n\t\t\txhttp2.open(\"DELETE\", \"https://wtg.aymerik-diebold.fr/api/trips/\"+i, true);\r\n\t\t\txhttp2.setRequestHeader('Authorization', 'Bearer ' + this.props.token);\r\n\t\t\txhttp2.setRequestHeader('Content-Type', 'application/json');\r\n\t\t\txhttp2.send();\r\n\t\t}*/\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"App\">\r\n        <NavigationBar\r\n          active={0}\r\n          token={this.props.token}\r\n          connected={this.props.connected}\r\n          connect={this.props.connect}\r\n        />\r\n\r\n        <Map\r\n          id=\"principalMap\"\r\n          center={[this.state.lat, this.state.lng]}\r\n          zoom={this.state.zoom}\r\n        >\r\n          <TileLayer\r\n            attribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n            url=\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\"\r\n          />\r\n\r\n          {this.state.voyages.map((voyage) =>\r\n            voyage.stages.map((etape) => (\r\n              <Marker position={[etape.lng, etape.lat]}>\r\n                <Popup>\r\n                  <h1>{voyage.title}</h1>\r\n                  <a href={\"?show=trip&id=\" + voyage.id}>Cliquez</a>\r\n                </Popup>\r\n              </Marker>\r\n            ))\r\n          )}\r\n        </Map>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import React, { Component } from \"react\";\nimport NavigationBar from \"./NavigationBar\";\n\nexport class Profile extends Component {\n  render() {\n    return (\n      <div className=\"profile\">\n        <NavigationBar active=\"4\" connected={this.props.connected} />\n        <div className=\"profileContainer\" style={containerStyle}>\n          <h1>My Profile</h1>\n          <div class=\"profileBox\" style={boxStyle}>\n            <p class=\"left-profile\">Email</p>\n            <p class=\"right-profile\">john.doe</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nconst containerStyle = {\n  textAlign: \"center\",\n  border: \"solid purple 3px\",\n  width: \"50%\",\n  margin: \"auto\",\n};\n\nconst boxStyle = {\n  display: \"flex\",\n  justifyContent: \"space-around\",\n};\n\nexport default Profile;\n","import React, { Component } from \"react\";\r\n//import ReactDom from 'react-dom'\r\n//import ObjectList from 'react-object-list'\r\n//import { List } from 'react-object-list/renderers'\r\nimport \"./App.css\";\r\nimport NavigationBar from './NavigationBar';\r\n\r\n\r\n\r\nclass SearchForm extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n        this.state = {\r\n            city: props.city,\r\n            title: props.title,\r\n            keyword: props.keyword,\r\n            chercher: props.chercher,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div class=\"formulaire\">\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">Title:</p>\r\n                    <input required type=\"text\" ref={this.state.title} id=\"title\" name=\"title\" placeholder=\"\"></input>\r\n                </div>\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">Keyword:</p>\r\n                    <input required type=\"text\" ref={this.state.keyword} id=\"keyword\" name=\"keyword\" placeholder=\"ex. Paris\"></input>\r\n                </div>\r\n\r\n                <div class=\"partiedetails\">\r\n                    <p class=\"partieLabel\">City:</p>\r\n                    <input required type=\"text\" ref={this.state.city} id=\"rcity\" name=\"city\" placeholder=\"ex. Rome\"></input>\r\n                </div>\r\n\r\n                <button type=\"button\" class=\"boutonsend\" onClick={this.state.chercher}>Chercher</button>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nclass ResultList extends React.Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            city: props.city,\r\n            keyword: props.keyword,\r\n            title: props.title,\r\n            voyages: [],\r\n        };\r\n\r\n        this.loadDoc(this);\r\n    }\r\n\r\n    loadDoc(parentThis) {\r\n        var xhttp = new XMLHttpRequest();\r\n        xhttp.onreadystatechange = function () {\r\n            if (this.readyState == 4 && this.status == 200) {\r\n                parentThis.setState({\r\n                    voyages: JSON.parse(this.response)['hydra:member'],\r\n                });\r\n                //console.log(parentThis.state.voyages);\r\n            }\r\n        };\r\n        \r\n        var url = \"https://wtg.aymerik-diebold.fr/api/trips?\";\r\n        var firstParam = true;\r\n        if (parentThis.state.title.length > 0) {\r\n            url = url.concat(\"title=\", parentThis.state.title);\r\n            firstParam = false;\r\n        };\r\n        if (parentThis.state.keyword.length > 0) {\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"keywords=\", parentThis.state.keyword);\r\n            firstParam = false;\r\n        };\r\n        if (parentThis.state.city.length > 0) {\r\n            if (!firstParam) {\r\n                url = url.concat(\"&\");\r\n            };\r\n            url = url.concat(\"stages.city=\",parentThis.state.city);\r\n        };\r\n\r\n        xhttp.open(\"GET\",url, true);\r\n        xhttp.send();\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <div id=\"recherche\">\r\n                    <h4> Results of\r\n                    <ul>\r\n                            <li>Title: \"{this.state.title}\" </li>\r\n                            <li>Keyword: \"{this.state.keyword}\" </li>\r\n                            <li>City: \"{this.state.city}\" </li>\r\n                        </ul>\r\n                    </h4>\r\n                </div>\r\n\r\n                <div id='table'>\r\n                    <table>\r\n                        <tr>\r\n                            <th>Title</th>\r\n                            <th>Author</th>\r\n                            <th>Description</th>\r\n                            <th>Vegan</th>\r\n                            <th>Ecological</th>\r\n                            <th>Lien</th>\r\n                        </tr>\r\n\r\n                        {this.state.voyages.map((voyage) => (\r\n                            <tr>\r\n                                <td>{voyage.title}</td>\r\n                                <td>{voyage.author.firstName} {voyage.author.lastNqme}</td>\r\n                                <td>{voyage.description}</td>\r\n                                <td><a href={\"?show=trip&id=\" + voyage.id}>Cliquez</a></td>\r\n                            </tr>\r\n                        ))}\r\n\r\n                    </table>\r\n                </div>\r\n\r\n            </div>\r\n        )\r\n    }\r\n\r\n\r\n}\r\n\r\n\r\n\r\nexport default class SearchResult extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            id: props.id,\r\n            startNewSearch: true,\r\n            toRender: <h1>Chargement en cours...</h1>\r\n        };\r\n\r\n        this.city = React.createRef();\r\n        this.title = React.createRef();\r\n        this.keyword = React.createRef();\r\n\r\n        // Cette liaison est n�c�ssaire afin de permettre l'utilisation de `this` dans la fonction de rappel.\r\n        this.chercher = this.chercher.bind(this);\r\n    }\r\n\r\n    chercher() {\r\n        if (this.city.current.validity.valid || this.title.current.validity.valid ||\r\n            this.keyword.current.validity.valid)\r\n            this.setState({\r\n                city: this.city.current.value,\r\n                keyword: this.keyword.current.value,\r\n                title: this.title.current.value,\r\n                startNewSearch: false,\r\n            })\r\n        else alert(\"Veillez completer au moins un champ pour chercher\")\r\n    }\r\n\r\n    render() {\r\n        return (\r\n            <div>\r\n                <NavigationBar active=\"5\" />\r\n\r\n                {this.state.startNewSearch ?\r\n                    <SearchForm city={this.city} title={this.title} keyword={this.keyword} chercher={this.chercher} />\r\n                    :\r\n                    <ResultList city={this.city.current.value} title={this.title.current.value} keyword={this.keyword.current.value} />\r\n\r\n                }\r\n            </div>\r\n        );\r\n\r\n    }\r\n}","import React, { Component } from \"react\";\nimport Cookies from \"universal-cookie\";\nimport \"./App.css\";\nimport ShowVoyage from \"./ShowVoyage.js\";\nimport AddVoyage from \"./AddVoyage.js\";\nimport ShowCarte from \"./ShowCarte.js\";\nimport Profile from \"./Profile\";\nimport SearchResult from \"./SearchResult.js\";\n\nexport default class App extends Component {\n  constructor(props) {\n    super(props);\n\n    const cookies = new Cookies();\n    const token = cookies.get(\"token\") ? cookies.get(\"token\") : false;\n\n    const urlParams = new URLSearchParams(window.location.search);\n    this.state = {\n      pageActuelle: urlParams.get(\"show\"), // on recupere la page a afficher via les arguments de l'URL\n      trip: urlParams.get(\"id\"),\n      connected: token ? true : false,\n      token: token ? token : \"\",\n    };\n  }\n\n  connect = (token) => {\n    console.log(\"Connected!\");\n    this.setState({ connected: true, token });\n    const cookies = new Cookies();\n    cookies.set(\"token\", token, { path: \"/\" });\n  };\n\n  render() {\n    if (this.state.pageActuelle === \"trip\") {\n      return (\n        <ShowVoyage\n          id={this.state.trip}\n          connected={this.state.connected}\n          connect={this.connect}\n        />\n      );\n    } else if (this.state.pageActuelle === \"save\") {\n      return (\n        <AddVoyage connected={this.state.connected} connect={this.connect} />\n      );\n    } else if (this.state.pageActuelle === \"profile\") {\n      return <Profile connected={this.state.connected} />;\n    } else if (this.state.pageActuelle === \"research\") {\n            return (<SearchResult />)\n    } else {\n      return (\n        <ShowCarte connected={this.state.connected} connect={this.connect} />\n      );\n    }\n  }\n}\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}